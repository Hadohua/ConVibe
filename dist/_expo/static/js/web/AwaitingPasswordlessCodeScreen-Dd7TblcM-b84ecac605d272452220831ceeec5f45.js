__d(function(_g,_r,_i,a,_m,_e,_d){"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(_e,'__esModule',{value:!0}),Object.defineProperty(_e,"AwaitingPasswordlessCodeScreen",{enumerable:!0,get:function(){return S}}),Object.defineProperty(_e,"AwaitingPasswordlessCodeScreenView",{enumerable:!0,get:function(){return y}}),Object.defineProperty(_e,"default",{enumerable:!0,get:function(){return S}});var r=_r(_d[0]),t=e(_r(_d[1])),o=e(_r(_d[2])),n=e(_r(_d[3])),i=_r(_d[4]),s=_r(_d[5]),c=_r(_d[6]),l=_r(_d[7]),d=_r(_d[8]),u=_r(_d[9]),p=_r(_d[10]),f=_r(_d[11]),m=_r(_d[12]),v=_r(_d[13]);_r(_d[14]),_r(_d[15]),_r(_d[16]),_r(_d[17]),_r(_d[18]),_r(_d[19]),_r(_d[20]),_r(_d[21]),_r(_d[22]),_r(_d[23]),_r(_d[24]),_r(_d[25]),_r(_d[26]),_r(_d[27]),_r(_d[28]),_r(_d[29]),_r(_d[30]),_r(_d[31]),_r(_d[32]),_r(_d[33]),_r(_d[34]),_r(_d[35]),_r(_d[36]),_r(_d[37]),_r(_d[38]),_r(_d[39]),_r(_d[40]),_r(_d[41]),_r(_d[42]),_r(_d[43]),_r(_d[44]),_r(_d[45]),_r(_d[46]),_r(_d[47]),_r(_d[48]),_r(_d[49]),_r(_d[50]),_r(_d[51]),_r(_d[52]),_r(_d[53]),_r(_d[54]);const y=({contactMethod:e,authFlow:c,appName:u="Privy",whatsAppEnabled:p=!1,onBack:f,onCodeSubmit:m,onResend:y,errorMessage:b,success:x=!1,resendCountdown:E=0,onInvalidInput:C,onClearError:S})=>{let[j,k]=(0,i.useState)(g);(0,i.useEffect)(()=>{b||k(g)},[b]);let M=async e=>{e.preventDefault();let r=e.currentTarget.value.replace(" ","");if(""===r)return;if(isNaN(Number(r)))return void C?.("Code should be numeric");S?.();let t=Number(e.currentTarget.name?.charAt(5)),o=[...r||[""]].slice(0,h-t),n=[...j.slice(0,t),...o,...j.slice(t+o.length)];k(n);let i=Math.min(Math.max(t+o.length,0),h-1);if(!isNaN(Number(e.currentTarget.value))){let e=document.querySelector(`input[name=code-${i}]`);e?.focus()}if(n.every(e=>e&&!isNaN(+e))){let e=document.querySelector(`input[name=code-${i}]`);e?.blur(),await(m?.(n.join("")))}};return(0,r.jsx)(v.S,{title:"Enter confirmation code",subtitle:(0,r.jsxs)("span","email"===c?{children:["Please check ",(0,r.jsx)(I,{children:e})," for an email from privy.io and enter your code below."]}:{children:["Please check ",(0,r.jsx)(I,{children:e})," for a",p?" WhatsApp":""," message from ",u," and enter your code below."]}),icon:"email"===c?o.default:n.default,onBack:f,showBack:!0,helpText:(0,r.jsxs)(_,{children:[(0,r.jsxs)("span",{children:["Didn't get ","email"===c?"an email":"a message","?"]}),E?(0,r.jsxs)(T,{children:[(0,r.jsx)(t.default,{color:"var(--privy-color-foreground)",strokeWidth:1.33,height:"12px",width:"12px"}),(0,r.jsx)("span",{children:"Code sent"})]}):(0,r.jsx)(d.L,{as:"button",size:"sm",onClick:y,children:"Resend code"})]}),children:(0,r.jsx)(w,{children:(0,r.jsx)(l.H,{children:(0,r.jsxs)(A,{children:[(0,r.jsx)("div",{children:j.map((e,t)=>(0,r.jsx)("input",{name:`code-${t}`,type:"text",value:j[t],onChange:M,onKeyUp:e=>{"Backspace"===e.key&&(e=>{if(S?.(),k([...j.slice(0,e),"",...j.slice(e+1)]),e>0){let r=document.querySelector(`input[name=code-${e-1}]`);r?.focus()}})(t)},inputMode:"numeric",autoFocus:0===t,pattern:"[0-9]",className:`${x?"success":""} ${b?"fail":""}`,autoComplete:s.isMobile?"one-time-code":"off"},t))}),(0,r.jsx)(N,{$fail:!!b,$success:x,children:(0,r.jsx)("span",{children:"Invalid or expired verification code"===b?"Incorrect code":b||(x?"Success!":"")})})]})})})})};let h=6,g=Array(6).fill("");var b,x,E=((b=E||{})[b.RESET_AFTER_DELAY=0]="RESET_AFTER_DELAY",b[b.CLEAR_ON_NEXT_VALID_INPUT=1]="CLEAR_ON_NEXT_VALID_INPUT",b),C=((x=C||{})[x.EMAIL=0]="EMAIL",x[x.SMS=1]="SMS",x);const S={component:()=>{let{navigate:e,lastScreen:t,navigateBack:o,setModalData:n,onUserCloseViaDialogOrKeybindRef:s}=(0,f.a)(),c=(0,u.u)(),{closePrivyModal:l,resendEmailCode:d,resendSmsCode:v,getAuthMeta:h,loginWithCode:g,updateWallets:b,createAnalyticsEvent:x}=(0,p.u)(),{authenticated:E,logout:C,user:S}=(0,f.u)(),{whatsAppEnabled:w}=(0,u.u)(),[A,N]=(0,i.useState)(!1),[_,T]=(0,i.useState)(null),[I,j]=(0,i.useState)(null),[k,M]=(0,i.useState)(0);s.current=()=>null;let R=h()?.email?0:1,O=0===R?h()?.email||"":h()?.phoneNumber||"",L=u.q-500;return(0,i.useEffect)(()=>{if(k){let e=setTimeout(()=>{M(k-1)},1e3);return()=>clearTimeout(e)}},[k]),(0,i.useEffect)(()=>{if(E&&A&&S){if(c?.legal.requireUsersAcceptTerms&&!S.hasAcceptedTerms){let r=setTimeout(()=>{e("AffirmativeConsentScreen")},L);return()=>clearTimeout(r)}if((0,m.s)(S,c.embeddedWallets)){let r=setTimeout(()=>{n({createWallet:{onSuccess:()=>{},onFailure:e=>{console.error(e),x({eventName:"embedded_wallet_creation_failure_logout",payload:{error:e,screen:"AwaitingPasswordlessCodeScreen"}}),C()},callAuthOnSuccessOnClose:!0}}),e("EmbeddedWalletOnAccountCreateScreen")},L);return()=>clearTimeout(r)}{b();let e=setTimeout(()=>l({shouldCallAuthOnSuccess:!0,isSuccess:!0}),u.q);return()=>clearTimeout(e)}}},[E,A,S]),(0,i.useEffect)(()=>{if(_&&0===I){let e=setTimeout(()=>{T(null),j(null);let e=document.querySelector("input[name=code-0]");e?.focus()},1400);return()=>clearTimeout(e)}},[_,I]),(0,r.jsx)(y,{contactMethod:O,authFlow:0===R?"email":"sms",appName:c?.name,whatsAppEnabled:w,onBack:()=>o(),onCodeSubmit:async r=>{try{await g(r),N(!0)}catch(r){if(r instanceof p.e&&r.privyErrorCode===p.b.INVALID_CREDENTIALS)T("Invalid or expired verification code"),j(0);else if(r instanceof p.e&&r.privyErrorCode===p.b.CANNOT_LINK_MORE_OF_TYPE)T(r.message);else{if(r instanceof p.e&&r.privyErrorCode===p.b.USER_LIMIT_REACHED)return console.error(new p.k(r).toString()),void e("UserLimitReachedScreen");if(r instanceof p.e&&r.privyErrorCode===p.b.USER_DOES_NOT_EXIST)return void e("AccountNotFoundScreen");if(r instanceof p.e&&r.privyErrorCode===p.b.LINKED_TO_ANOTHER_USER)return n({errorModalData:{error:r,previousScreen:t??"AwaitingPasswordlessCodeScreen"}}),void e("ErrorScreen",!1);if(r instanceof p.e&&r.privyErrorCode===p.b.DISALLOWED_PLUS_EMAIL)return n({inlineError:{error:r}}),void e("ConnectOrCreateScreen",!1);if(r instanceof p.e&&r.privyErrorCode===p.b.ACCOUNT_TRANSFER_REQUIRED&&r.data?.data?.nonce)return n({accountTransfer:{nonce:r.data?.data?.nonce,account:O,displayName:r.data?.data?.account?.displayName,linkMethod:0===R?"email":"sms",embeddedWalletAddress:r.data?.data?.otherUser?.embeddedWalletAddress}}),void e("LinkConflictScreen");T("Issue verifying code"),j(0)}}},onResend:async()=>{M(30),0===R?await d():await v()},errorMessage:_||void 0,success:A,resendCountdown:k,onInvalidInput:e=>{T(e),j(1)},onClearError:()=>{1===I&&(T(null),j(null))}})}};let w=c.styled.div.withConfig({displayName:"PasswordlessCodeContainer",componentId:"sc-6187bfee-0"})(["display:flex;flex-direction:column;align-items:center;justify-content:center;margin:auto;gap:16px;flex-grow:1;width:100%;"]),A=c.styled.div.withConfig({displayName:"CodeInput",componentId:"sc-6187bfee-1"})(["display:flex;flex-direction:column;width:100%;gap:12px;> div:first-child{display:flex;justify-content:center;gap:0.5rem;width:100%;border-radius:var(--privy-border-radius-sm);> input{border:1px solid var(--privy-color-foreground-4);background:var(--privy-color-background);border-radius:var(--privy-border-radius-sm);padding:8px 10px;height:48px;width:40px;text-align:center;font-size:18px;font-weight:600;color:var(--privy-color-foreground);transition:all 0.2s ease;}> input:focus{border:1px solid var(--privy-color-foreground);box-shadow:0 0 0 1px var(--privy-color-foreground);}> input:invalid{border:1px solid var(--privy-color-error);}> input.success{border:1px solid var(--privy-color-border-success);background:var(--privy-color-success-bg);}> input.fail{border:1px solid var(--privy-color-border-error);background:var(--privy-color-error-bg);animation:shake 180ms;animation-iteration-count:2;}}@keyframes shake{0%{transform:translate(1px,0px);}33%{transform:translate(-1px,0px);}67%{transform:translate(-1px,0px);}100%{transform:translate(1px,0px);}}"]),N=c.styled.div.withConfig({displayName:"InputHelp",componentId:"sc-6187bfee-2"})(["line-height:20px;min-height:20px;font-size:14px;font-weight:400;color:",";display:flex;justify-content:center;width:100%;text-align:center;"],e=>e.$success?"var(--privy-color-success-dark)":e.$fail?"var(--privy-color-error-dark)":"transparent"),_=c.styled.div.withConfig({displayName:"HelpTextContainer",componentId:"sc-6187bfee-3"})(["display:flex;gap:8px;align-items:center;justify-content:center;width:100%;color:var(--privy-color-foreground-2);"]),T=c.styled.div.withConfig({displayName:"Badge",componentId:"sc-6187bfee-4"})(["display:flex;align-items:center;justify-content:center;border-radius:var(--privy-border-radius-sm);padding:2px 8px;gap:4px;background:var(--privy-color-background-2);color:var(--privy-color-foreground-2);"]),I=c.styled.span.withConfig({displayName:"BoldWrappingSpan",componentId:"sc-6187bfee-5"})(["font-weight:500;word-break:break-all;color:var(--privy-color-foreground);"])},4209,[16,4623,4624,4625,14,1589,1568,4593,4626,1557,1559,1556,4581,4572,784,1558,1560,943,783,1358,819,1341,1564,1565,1591,1592,1160,1593,1594,1595,1343,1654,1657,1660,1661,1662,1663,1871,3739,1389,3741,787,3742,1374,3748,3894,3895,4573,4574,4575,4576,4577,4578,4579,4580]);
__d(function(g,r,i,a,m,e,d){var t=r(d[0]);const l=["title","titleId"],n=r(d[1]);function o(o,c){let{title:s,titleId:u}=o,f=t(o,l);return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:c,"aria-labelledby":u},f),s?n.createElement("title",{id:u},s):null,n.createElement("path",{fillRule:"evenodd",d:"M16.704 4.153a.75.75 0 0 1 .143 1.052l-8 10.5a.75.75 0 0 1-1.127.075l-4.5-4.5a.75.75 0 0 1 1.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 0 1 1.05-.143Z",clipRule:"evenodd"}))}const c=n.forwardRef(o);m.exports=c},4623,[289,14]);