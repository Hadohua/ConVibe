__d(function(_g,_r,_i,a,m,_e,d){"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(_e,'__esModule',{value:!0}),Object.defineProperty(_e,"SetAutomaticRecoveryScreen",{enumerable:!0,get:function(){return p}}),Object.defineProperty(_e,"default",{enumerable:!0,get:function(){return p}});var r=_r(d[0]),t=e(_r(d[1])),o=e(_r(d[2])),n=_r(d[3]),l=_r(d[4]),i=_r(d[5]),s=_r(d[6]),c=_r(d[7]),u=_r(d[8]),y=_r(d[9]),f=_r(d[10]),h=_r(d[11]),g=_r(d[12]);_r(d[13]),_r(d[14]),_r(d[15]),_r(d[16]),_r(d[17]),_r(d[18]),_r(d[19]),_r(d[20]),_r(d[21]),_r(d[22]),_r(d[23]),_r(d[24]),_r(d[25]),_r(d[26]),_r(d[27]),_r(d[28]);const v=c.styled.div.withConfig({displayName:"WithCircleBorder",componentId:"sc-e4fc5563-0"})(["&&{border-width:4px;}display:flex;justify-content:center;align-items:center;padding:1rem;aspect-ratio:1;border-style:solid;border-color:",";border-radius:50%;"],e=>e.$color??"var(--privy-color-accent)"),p={component:()=>{let{user:e}=(0,l.u)(),{client:c,walletProxy:p,refreshSessionAndUser:w,closePrivyModal:x}=(0,h.u)(),j=(0,l.a)(),{entropyId:b,entropyIdVerifier:S}=j.data?.recoverWallet,[T,C]=(0,n.useState)(!1),[M,P]=(0,n.useState)(null),[I,U]=(0,n.useState)(null);function W(){if(!T){if(I)return j.data?.setWalletPassword?.onFailure(I),void x();if(!M)return j.data?.setWalletPassword?.onFailure(Error("User exited set recovery flow")),void x()}}j.onUserCloseViaDialogOrKeybindRef.current=W;let _=!(!T&&!M);return(0,r.jsxs)(r.Fragment,I?{children:[(0,r.jsx)(s.M,{onClose:W},"header"),(0,r.jsx)(v,{$color:"var(--privy-color-error)",style:{alignSelf:"center"},children:(0,r.jsx)(t.default,{height:38,width:38,stroke:"var(--privy-color-error)"})}),(0,r.jsx)(y.T,{style:{marginTop:"0.5rem"},children:"Something went wrong"}),(0,r.jsx)(g.Y,{style:{minHeight:"2rem"}}),(0,r.jsx)(i.a,{onClick:()=>U(null),children:"Try again"}),(0,r.jsx)(s.B,{})]}:{children:[(0,r.jsx)(s.M,{onClose:W},"header"),(0,r.jsx)(o.default,{style:{width:"3rem",height:"3rem",alignSelf:"center"}}),(0,r.jsx)(y.T,{style:{marginTop:"0.5rem"},children:"Automatically secure your account"}),(0,r.jsx)(u.S,{style:{marginTop:"1rem"},children:"When you log into a new device, you\u2019ll only need to authenticate to access your account. Never get logged out if you forget your password."}),(0,r.jsx)(g.Y,{style:{minHeight:"2rem"}}),(0,r.jsx)(i.a,{loading:T,disabled:_,onClick:()=>(async function(){C(!0);try{let r=await c.getAccessToken(),t=(0,l.h)(e,b);if(!r||!p||!t)return;if(!(await p.setRecovery({accessToken:r,entropyId:b,entropyIdVerifier:S,existingRecoveryMethod:t.recoveryMethod,recoveryMethod:"privy"})).entropyId)throw Error("Unable to set recovery on wallet");let o=await w();if(!o)throw Error("Unable to set recovery on wallet");let n=(0,l.h)(o,t.address);if(!n)throw Error("Unabled to set recovery on wallet");P(!!o),setTimeout(()=>{j.data?.setWalletPassword?.onSuccess(n),x()},f.q)}catch(e){U(e)}finally{C(!1)}})(),children:M?"Success":"Confirm"}),(0,r.jsx)(s.B,{})]})}}},5803,[5,5713,5797,3,2508,5244,5246,6277,5663,5664,2509,2511,2523,792,5247,5248,5249,5250,2129,2510,6275,2524,2537,2539,2293,2540,1019,2621,2622]);