__d(function(_g,_r,_i,_a,_m,_e,_d){"use strict";Object.defineProperty(_e,'__esModule',{value:!0}),Object.defineProperty(_e,"FarcasterSignerStatusScreen",{enumerable:!0,get:function(){return C}}),Object.defineProperty(_e,"FarcasterSignerStatusView",{enumerable:!0,get:function(){return m}}),Object.defineProperty(_e,"default",{enumerable:!0,get:function(){return C}});var e=_r(_d[0]),t=_r(_d[1]),a=_r(_d[2]),n=_r(_d[3]),r=_r(_d[4]),s=_r(_d[5]),i=_r(_d[6]),o=_r(_d[7]),l=_r(_d[8]),c=_r(_d[9]),d=_r(_d[10]),u=_r(_d[11]),p=_r(_d[12]);_r(_d[13]),_r(_d[14]),_r(_d[15]),_r(_d[16]),_r(_d[17]),_r(_d[18]),_r(_d[19]),_r(_d[20]),_r(_d[21]),_r(_d[22]),_r(_d[23]),_r(_d[24]),_r(_d[25]),_r(_d[26]),_r(_d[27]),_r(_d[28]),_r(_d[29]),_r(_d[30]),_r(_d[31]),_r(_d[32]),_r(_d[33]);let g="#8a63d2";const m=({appName:t,loading:n,success:l,errorMessage:c,connectUri:d,onBack:m,onClose:C,onOpenFarcaster:b})=>(0,e.jsx)(u.S,a.isMobile||n?a.isIOS?{title:c?c.message:"Add a signer to Farcaster",subtitle:c?c.detail:`This will allow ${t} to add casts, likes, follows, and more on your behalf.`,icon:p.F,iconVariant:"loading",iconLoadingStatus:{success:l,fail:!!c},primaryCta:d&&b?{label:"Open Farcaster app",onClick:b}:void 0,onBack:m,onClose:C,watermark:!0}:{title:c?c.message:"Requesting signer from Farcaster",subtitle:c?c.detail:"This should only take a moment",icon:p.F,iconVariant:"loading",iconLoadingStatus:{success:l,fail:!!c},onBack:m,onClose:C,watermark:!0,children:d&&a.isMobile&&(0,e.jsx)(f,{children:(0,e.jsx)(i.O,{text:"Take me to Farcaster",url:d,color:g})})}:{title:"Add a signer to Farcaster",subtitle:`This will allow ${t} to add casts, likes, follows, and more on your behalf.`,onBack:m,onClose:C,watermark:!0,children:(0,e.jsxs)(h,{children:[(0,e.jsx)(y,{children:d?(0,e.jsx)(o.Q,{url:d,size:275,squareLogoElement:p.F}):(0,e.jsx)(w,{children:(0,e.jsx)(s.L,{})})}),(0,e.jsxs)(v,{children:[(0,e.jsx)(x,{children:"Or copy this link and paste it into a phone browser to open the Farcaster app."}),d&&(0,e.jsx)(r.C,{text:d,itemName:"link",color:g})]})]})});let f=n.styled.div.withConfig({displayName:"MobileLinkContainer",componentId:"sc-2da6f06e-0"})(["margin-top:24px;"]),h=n.styled.div.withConfig({displayName:"ContentContainer",componentId:"sc-2da6f06e-1"})(["display:flex;flex-direction:column;align-items:center;gap:24px;"]),y=n.styled.div.withConfig({displayName:"QrContainer",componentId:"sc-2da6f06e-2"})(["padding:24px;position:relative;display:flex;align-items:center;justify-content:center;min-height:275px;"]),v=n.styled.div.withConfig({displayName:"InstructionsContainer",componentId:"sc-2da6f06e-3"})(["display:flex;flex-direction:column;align-items:center;gap:16px;"]),x=n.styled.div.withConfig({displayName:"InstructionText",componentId:"sc-2da6f06e-4"})(["font-size:0.875rem;text-align:center;color:var(--privy-color-foreground-2);"]),w=n.styled.div.withConfig({displayName:"LoaderWrapper",componentId:"sc-2da6f06e-5"})(["position:relative;width:82px;height:82px;"]);const C={component:()=>{let{lastScreen:a,navigateBack:n,data:r}=(0,d.a)(),s=(0,l.u)(),{requestFarcasterSignerStatus:i,closePrivyModal:o}=(0,c.u)(),[u,p]=(0,t.useState)(void 0),[g,f]=(0,t.useState)(!1),[h,y]=(0,t.useState)(!1),v=(0,t.useRef)([]),x=r?.farcasterSigner;(0,t.useEffect)(()=>{let e=Date.now(),t=setInterval(async()=>{if(!x?.public_key)return clearInterval(t),void p({retryable:!0,message:"Connect failed",detail:"Something went wrong. Please try again."});"approved"===x.status&&(clearInterval(t),f(!1),y(!0),v.current.push(setTimeout(()=>o({shouldCallAuthOnSuccess:!1,isSuccess:!0}),l.q)));let a=await i(x?.public_key),n=Date.now()-e;"approved"===a.status?(clearInterval(t),f(!1),y(!0),v.current.push(setTimeout(()=>o({shouldCallAuthOnSuccess:!1,isSuccess:!0}),l.q))):n>3e5?(clearInterval(t),p({retryable:!0,message:"Connect failed",detail:"The request timed out. Try again."})):"revoked"===a.status&&(clearInterval(t),p({retryable:!0,message:"Request rejected",detail:"The request was rejected. Please try again."}))},2e3);return()=>{clearInterval(t),v.current.forEach(e=>clearTimeout(e))}},[]);let w="pending_approval"===x?.status?x.signer_approval_url:void 0;return(0,e.jsx)(m,{appName:s.name,loading:g,success:h,errorMessage:u,connectUri:w,onBack:a?n:void 0,onClose:o,onOpenFarcaster:()=>{w&&(window.location.href=w)}})}}},4230,[16,14,1589,1568,4659,1564,4658,4586,1557,1559,1556,4572,4632,4585,1565,1591,784,1341,1592,943,1160,1593,1594,4587,1558,1560,4573,4574,4575,4576,4577,4578,4579,4580]);