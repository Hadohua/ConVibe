__d(function(_g,_r,_i,a,_m,_e,d){"use strict";Object.defineProperty(_e,'__esModule',{value:!0}),Object.defineProperty(_e,"PasskeyStatusScreen",{enumerable:!0,get:function(){return y}}),Object.defineProperty(_e,"PasskeyStatusScreenView",{enumerable:!0,get:function(){return l}}),Object.defineProperty(_e,"default",{enumerable:!0,get:function(){return y}});var e=_r(d[0]),t=_r(d[1]),r=_r(d[2]),s=_r(d[3]),o=_r(d[4]),n=_r(d[5]),u=_r(d[6]),c=_r(d[7]),i=_r(d[8]);_r(d[9]),_r(d[10]),_r(d[11]),_r(d[12]),_r(d[13]),_r(d[14]),_r(d[15]),_r(d[16]),_r(d[17]),_r(d[18]),_r(d[19]),_r(d[20]),_r(d[21]),_r(d[22]),_r(d[23]),_r(d[24]),_r(d[25]),_r(d[26]),_r(d[27]),_r(d[28]),_r(d[29]),_r(d[30]),_r(d[31]),_r(d[32]),_r(d[33]),_r(d[34]),_r(d[35]),_r(d[36]),_r(d[37]),_r(d[38]),_r(d[39]),_r(d[40]),_r(d[41]),_r(d[42]),_r(d[43]),_r(d[44]),_r(d[45]),_r(d[46]),_r(d[47]),_r(d[48]),_r(d[49]),_r(d[50]);const l=({status:r,passkeySignupFlow:s=!1,error:o,onRetry:u})=>(0,e.jsx)(i.S,{title:(()=>{switch(r){case"loading":return"Waiting for passkey";case"success":return"Success";case"error":return"Something went wrong"}})(),subtitle:(0,e.jsx)(f,{children:(()=>{switch(r){case"loading":return s?"Please follow prompts to register your passkey.":"Please follow prompts to verify your passkey.\nYou will have to sign up with another method first to register a passkey for your account.";case"success":return"You've successfully logged in with your passkey.";case"error":if(o instanceof n.c){if(o.privyErrorCode===n.b.CANNOT_LINK_MORE_OF_TYPE)return"Cannot link more passkeys to account.";if(o.privyErrorCode===n.b.PASSKEY_NOT_ALLOWED)return"Passkey request timed out or rejected by user.\nYou will have to sign up with another method first to register a passkey for your account."}return"An unknown error occurred.\nYou will have to sign up with another method first to register a passkey for your account."}})()}),icon:t.FingerprintIcon,iconVariant:"loading",iconLoadingStatus:{success:"success"===r,fail:"error"===r},primaryCta:"error"===r&&u?{label:"Retry",onClick:u}:"success"===r?{label:"Continue",disabled:!0}:void 0,watermark:!0}),y={component:()=>{let{data:t,setModalData:s,navigate:i}=(0,u.a)(),y=(0,o.u)(),{loginWithPasskey:f,signupWithPasskey:p,closePrivyModal:g,createAnalyticsEvent:h}=(0,n.u)(),{user:m,logout:w}=(0,u.u)(),{passkeySignupFlow:S}=t?.passkeyAuthModalData??{},k=o.q-500,[b,v]=(0,r.useState)("loading"),[P,_]=(0,r.useState)(null),O=(0,r.useRef)([]),A=e=>{O.current=[e,...O.current]};(0,r.useEffect)(()=>()=>{O.current.forEach(e=>clearTimeout(e)),O.current=[]},[]);let C=async()=>{v("loading");try{S?await p():await f(),v("success")}catch(e){_(e),v("error")}};return(0,r.useEffect)(()=>{if("success"===b&&m){if(y?.legal.requireUsersAcceptTerms&&!m.hasAcceptedTerms)return void A(setTimeout(()=>{i("AffirmativeConsentScreen")},k));if(!(0,c.s)(m,y?.embeddedWallets))return void A(setTimeout(()=>{g({shouldCallAuthOnSuccess:!0,isSuccess:!0})},o.q));A(setTimeout(()=>{s({createWallet:{onSuccess:()=>{},onFailure:e=>{console.error(e),h({eventName:"embedded_wallet_creation_failure_logout",payload:{error:e,screen:"PasskeyStatusScreen"}}),w()},callAuthOnSuccessOnClose:!0}}),i("EmbeddedWalletOnAccountCreateScreen")},k))}},[m,b]),(0,r.useEffect)(()=>{C()},[]),(0,e.jsx)(l,{status:b,passkeySignupFlow:S,error:P,onRetry:C})}};let f=s.styled.span.withConfig({displayName:"SubtitleText",componentId:"sc-5f92460f-0"})(["white-space:pre-wrap;"])},4249,[16,4571,14,1568,1557,1559,1556,4581,4572,784,1558,1560,943,783,1358,819,1341,1564,1565,1589,1591,1592,1160,1593,1594,1595,1343,1654,1657,1660,1661,1662,1663,1871,3739,1389,3741,787,3742,1374,3748,3894,3895,4573,4574,4575,4576,4577,4578,4579,4580]);