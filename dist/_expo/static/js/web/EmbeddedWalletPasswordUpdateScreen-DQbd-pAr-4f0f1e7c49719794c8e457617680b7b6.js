__d(function(_g,_r,i,a,m,_e,d){"use strict";Object.defineProperty(_e,'__esModule',{value:!0}),Object.defineProperty(_e,"EmbeddedWalletPasswordUpdateScreen",{enumerable:!0,get:function(){return c}}),Object.defineProperty(_e,"default",{enumerable:!0,get:function(){return c}});var e=_r(d[0]),t=_r(d[1]),r=_r(d[2]),s=_r(d[3]),o=_r(d[4]),n=_r(d[5]),l=_r(d[6]);_r(d[7]),_r(d[8]),_r(d[9]),_r(d[10]),_r(d[11]),_r(d[12]),_r(d[13]),_r(d[14]),_r(d[15]),_r(d[16]),_r(d[17]),_r(d[18]),_r(d[19]),_r(d[20]),_r(d[21]),_r(d[22]),_r(d[23]),_r(d[24]),_r(d[25]),_r(d[26]),_r(d[27]),_r(d[28]),_r(d[29]),_r(d[30]),_r(d[31]),_r(d[32]),_r(d[33]),_r(d[34]),_r(d[35]),_r(d[36]),_r(d[37]),_r(d[38]),_r(d[39]),_r(d[40]),_r(d[41]),_r(d[42]);const c={component:()=>{let[c,u]=(0,t.useState)(null),[y,w]=(0,t.useState)(!1),[v,p]=(0,t.useState)(null),[g,h]=(0,t.useState)(""),{authenticated:_,user:f}=(0,r.u)(),{client:b,walletProxy:M,refreshSessionAndUser:P,closePrivyModal:R,createAnalyticsEvent:A}=(0,o.u)(),{navigate:S,data:E,onUserCloseViaDialogOrKeybindRef:C}=(0,r.a)(),O=(0,s.u)(),{onSuccess:x,onFailure:N}=E.setWalletPassword,I=(0,r.g)(f),j="user-passcode"===c?.recoveryMethod,U="user-passcode"===I?.recoveryMethod;(0,t.useEffect)(()=>{_||(S("LandingScreen"),N(new o.o("User must be authenticated before setting a password on a Privy wallet")))},[_]);let V=()=>v?(N(v),void R({shouldCallAuthOnSuccess:!1})):j?(x(c),void R({shouldCallAuthOnSuccess:!1})):(N(new o.m("Exited before password was added to wallet")),void R({shouldCallAuthOnSuccess:!1}));return C.current=V,(0,e.jsx)(l.S,{appName:O?.name||"privy",config:{initiatedBy:"user",onCancel:V},error:v?"An error has occurred, please try again.":void 0,buttonLoading:y,buttonHideAnimations:!1,password:g,isResettingPassword:U,onPasswordGenerate:()=>h((0,l.g)()),onPasswordChange:h,onSubmit:async()=>{j?(x(c),R({shouldCallAuthOnSuccess:!1})):(w(!0),p(null),await(async()=>{let e=await b.getAccessToken();if(e&&f&&I?.address&&g&&M)try{A({eventName:"embedded_wallet_set_recovery_started",payload:{walletAddress:I.address,existingRecoveryMethod:I.recoveryMethod,targetRecoveryMethod:"user-passcode",isResettingPassword:U}});let{entropyId:t,entropyIdVerifier:s}=(0,n.g)(f);if(!(await M.setRecovery({accessToken:e,entropyId:t,entropyIdVerifier:s,recoveryPassword:g,recoveryMethod:"user-passcode"})).entropyId)return p(new o.m("Error setting password on privy wallet")),void A({eventName:"embedded_wallet_set_recovery_failed",payload:{walletAddress:I.address,existingRecoveryMethod:I.recoveryMethod,targetRecoveryMethod:"user-passcode",isResettingPassword:U,reason:"error setting password"}});let l=await P(),c=(0,r.g)(l);if(!c)return p(new o.m("Error setting password on privy wallet")),void A({eventName:"embedded_wallet_set_recovery_failed",payload:{walletAddress:I.address,existingRecoveryMethod:I.recoveryMethod,targetRecoveryMethod:"user-passcode",isResettingPassword:U,reason:"wallet disconnected"}});u(c),A({eventName:"embedded_wallet_set_recovery_completed",payload:{walletAddress:I.address,existingRecoveryMethod:I.recoveryMethod,targetRecoveryMethod:"user-passcode",isResettingPassword:U}})}catch(e){console.warn(e),p(e instanceof Error?e:Error("Error setting password on privy wallet")),A({eventName:"embedded_wallet_set_password_failed",payload:{walletAddress:I.address,reason:e}})}})(),w(!1))},onClose:V})}}},5734,[5,3,2508,2509,2511,2622,5717,792,2129,2510,6275,5713,5648,6277,5246,5247,5248,5249,5250,5718,5719,5720,5721,5244,2523,2524,2537,2539,2293,2540,1019,2621,5722,5723,5688,9692,5725,5729,5730,5731,5732,5733,5649]);