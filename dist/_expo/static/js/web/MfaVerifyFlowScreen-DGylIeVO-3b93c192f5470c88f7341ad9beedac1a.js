__d(function(_g,r,i,a,m,e,_d){"use strict";Object.defineProperty(e,'__esModule',{value:!0}),Object.defineProperty(e,"MfaVerifyFlowScreen",{enumerable:!0,get:function(){return u}}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return u}});var t=r(_d[0]),n=r(_d[1]),o=r(_d[2]),s=r(_d[3]),l=r(_d[4]);r(_d[5]),r(_d[6]),r(_d[7]),r(_d[8]),r(_d[9]),r(_d[10]),r(_d[11]),r(_d[12]),r(_d[13]),r(_d[14]),r(_d[15]),r(_d[16]),r(_d[17]),r(_d[18]),r(_d[19]),r(_d[20]),r(_d[21]),r(_d[22]),r(_d[23]),r(_d[24]),r(_d[25]),r(_d[26]),r(_d[27]),r(_d[28]),r(_d[29]),r(_d[30]),r(_d[31]),r(_d[32]),r(_d[33]),r(_d[34]),r(_d[35]),r(_d[36]),r(_d[37]),r(_d[38]),r(_d[39]),r(_d[40]),r(_d[41]),r(_d[42]),r(_d[43]),r(_d[44]),r(_d[45]),r(_d[46]),r(_d[47]),r(_d[48]),r(_d[49]),r(_d[50]),r(_d[51]),r(_d[52]),r(_d[53]),r(_d[54]),r(_d[55]),r(_d[56]),r(_d[57]),r(_d[58]),r(_d[59]),r(_d[60]),r(_d[61]),r(_d[62]),r(_d[63]),r(_d[64]),r(_d[65]),r(_d[66]);const u=({onClose:u})=>{let{user:c}=(0,o.u)(),[f,d]=(0,n.useState)(c?.mfaMethods[0]??null),{init:h,cancel:y,submit:b}=(0,s.u)(),[k,v]=(0,n.useState)(!1),[S,g]=(0,n.useState)(null),[w,M]=(0,n.useState)();(0,n.useEffect)(()=>{d(c?.mfaMethods[0]??null)},[c?.mfaMethods]);let p=(0,n.useRef)(!1);async function j(t){M(void 0);try{if(!t||!f)return;await b(f,t),v(!0),M(void 0),u()}catch(t){throw(0,l.t)(t).error}}async function B(t){if("passkey"!==t)try{d(t),await h(t)}catch(t){console.error(t)}else try{d(t);let n=await h(t);if(!n)throw Error("something went wrong");g(n),await b(t,n),v(!0),M(void 0),u()}catch(t){M((0,l.t)(t))}}(0,n.useEffect)(()=>{!p.current&&f&&(p.current=!0,B(f).finally(()=>{p.current=!1}))},[]);let C=()=>{d(null),M(void 0),y(),u()};return c?"passkey"===f?(0,t.jsx)(l.V,{account:c.linkedAccounts.filter(t=>"passkey"===t.type&&t.enrolledInMfa).sort((t,n)=>n.firstVerifiedAt.valueOf()-t.firstVerifiedAt.valueOf())[0],submitSuccess:k,hasBlockingError:w?.isBlocking??!1,error:w?.error,onClose:C,onBack:()=>{d(null),M(void 0)},handleSubmit:()=>j(S).catch(M)}):f?(0,t.jsx)(l.a,{submitSuccess:k,hasBlockingError:w?.isBlocking??!1,handleSubmitCode:j,selectedMethod:f,onClose:C,onBack:c.mfaMethods.length>1?()=>d(null):void 0}):(0,t.jsx)(l.b,{user:c,onSelect:B,handleClose:C}):null}},5812,[5,3,2508,2128,5782,792,2509,2129,2510,2511,6275,2310,2164,2293,2523,2524,6277,2537,2539,2540,1019,2621,2622,2623,2295,2683,2686,2689,2690,2691,2692,2900,4618,2341,4620,2132,4621,2326,7827,4873,4874,5774,5698,5682,5771,5246,5247,5248,5249,5250,5243,5244,5245,5251,5776,5783,5713,5761,5651,5652,5784,5785,5672,5657,5656,5648,5670]);