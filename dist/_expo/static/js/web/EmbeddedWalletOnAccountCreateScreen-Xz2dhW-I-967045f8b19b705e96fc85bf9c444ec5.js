__d(function(_g,_r,i,a,m,_e,d){"use strict";Object.defineProperty(_e,'__esModule',{value:!0}),Object.defineProperty(_e,"EmbeddedWalletOnAccountCreateScreen",{enumerable:!0,get:function(){return h}}),Object.defineProperty(_e,"EmbeddedWalletOnAccountCreateView",{enumerable:!0,get:function(){return w}}),Object.defineProperty(_e,"default",{enumerable:!0,get:function(){return h}});var e=_r(d[0]),t=_r(d[1]),l=_r(d[2]),r=_r(d[3]),n=_r(d[4]),s=_r(d[5]),o=_r(d[6]),c=_r(d[7]),u=_r(d[8]);_r(d[9]),_r(d[10]),_r(d[11]),_r(d[12]),_r(d[13]),_r(d[14]),_r(d[15]),_r(d[16]),_r(d[17]),_r(d[18]),_r(d[19]),_r(d[20]),_r(d[21]),_r(d[22]),_r(d[23]),_r(d[24]),_r(d[25]),_r(d[26]),_r(d[27]),_r(d[28]),_r(d[29]),_r(d[30]),_r(d[31]),_r(d[32]),_r(d[33]),_r(d[34]),_r(d[35]),_r(d[36]),_r(d[37]),_r(d[38]),_r(d[39]),_r(d[40]),_r(d[41]),_r(d[42]),_r(d[43]),_r(d[44]),_r(d[45]),_r(d[46]),_r(d[47]),_r(d[48]),_r(d[49]),_r(d[50]);const w=({errorMessage:l,onClose:r})=>(0,e.jsx)(u.S,l?{title:"Something went wrong",subtitle:l,icon:t.XCircle,iconVariant:"error",primaryCta:{label:"Close",onClick:r},watermark:!0}:{title:"Creating your wallet",subtitle:"Please wait...",iconVariant:"loading",watermark:!1}),h={component:()=>{let{setModalData:t,navigate:u,data:h,onUserCloseViaDialogOrKeybindRef:b}=(0,c.a)(),y=(0,r.u)(),[g,C]=(0,l.useState)(""),{embeddedWallets:O}=(0,r.u)(),{authenticated:f,user:S}=(0,c.u)(),{closePrivyModal:v,walletProxy:W,client:p}=(0,s.u)(),{onSuccess:A,onFailure:P,callAuthOnSuccessOnClose:j,shouldCreateEth:E,shouldCreateSol:x}=h.createWallet,U="legacy-embedded-wallets-only"===y.embeddedWallets.mode&&!0===y?.embeddedWallets.requireUserOwnedRecoveryOnCreate,[R,M]=(0,l.useState)(null),{create:k}=(0,o.u)(),I=E??(!!S&&(0,n.s)(S,y.embeddedWallets.ethereum.createOnLogin)),T=x??(!!S&&(0,n.k)(S,y.embeddedWallets.solana.createOnLogin)),V=new n.R(async()=>{let e=await p.getAccessToken();if(S&&e&&W)try{let e;if(I&&T)e=await k({chainType:"ethereum",walletIndex:0,latestUser:S}),e=await k({chainType:"solana",walletIndex:0,latestUser:e.user});else if(T)e=await k({chainType:"solana",walletIndex:0,latestUser:S});else{if(!I)return void v({shouldCallAuthOnSuccess:j});e=await k({chainType:"ethereum",walletIndex:0,latestUser:S})}M(e),u("EmbeddedWalletCreatedScreen")}catch(e){C(e.message)}});return(0,l.useEffect)(()=>f&&S?U?(t(Object.assign({},h,{createWallet:Object.assign({},h.createWallet,{shouldCreateEth:I,shouldCreateSol:T}),recoverySelection:Object.assign({},h?.recoverySelection,{isInAccountCreateFlow:!0,shouldCreateEth:I,shouldCreateSol:T})})),u((0,n.E)({walletAction:"create",showAutomaticRecovery:!1,availableRecoveryMethods:O.userOwnedRecoveryOptions,legacySetWalletPasswordFlow:!1,isResettingPassword:!1}))):void V.execute():(u("LandingScreen"),void P(Error("User must be authenticated before creating a Privy wallet"))),[U,f]),b.current=()=>null,(0,e.jsx)(w,{errorMessage:g||void 0,onClose:()=>{R?(A(R),v({shouldCallAuthOnSuccess:j})):(P(new s.m("User wallet creation failed")),v({shouldCallAuthOnSuccess:!1}))}})}}},4224,[16,4571,14,1557,783,1559,4643,1556,4572,784,1558,1358,819,1341,1564,1565,1568,1589,1591,1592,943,1160,1593,1594,1595,1343,1654,1657,1660,1661,1662,1663,1871,3739,1560,1389,3741,787,3742,1374,3748,3894,3895,4573,4574,4575,4576,4577,4578,4579,4580]);