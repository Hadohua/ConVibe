__d(function(_g,r,_i,a,_m,_e,_d){"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(_e,'__esModule',{value:!0}),Object.defineProperty(_e,"MfaEnrollmentFlowScreen",{enumerable:!0,get:function(){return C}}),Object.defineProperty(_e,"default",{enumerable:!0,get:function(){return C}});var n=r(_d[0]),t=e(r(_d[1])),o=e(r(_d[2])),s=e(r(_d[3])),l=e(r(_d[4])),i=r(_d[5]),c=r(_d[6]),d=r(_d[7]),u=r(_d[8]),h=r(_d[9]),m=r(_d[10]),x=r(_d[11]),f=r(_d[12]),j=r(_d[13]),y=e(r(_d[14])),p=e(r(_d[15])),v=r(_d[16]),w=r(_d[17]),g=r(_d[18]),S=r(_d[19]);r(_d[20]),r(_d[21]),r(_d[22]),r(_d[23]),r(_d[24]),r(_d[25]),r(_d[26]),r(_d[27]),r(_d[28]),r(_d[29]),r(_d[30]),r(_d[31]),r(_d[32]),r(_d[33]),r(_d[34]),r(_d[35]),r(_d[36]),r(_d[37]),r(_d[38]),r(_d[39]),r(_d[40]),r(_d[41]),r(_d[42]),r(_d[43]),r(_d[44]),r(_d[45]),r(_d[46]),r(_d[47]),r(_d[48]),r(_d[49]),r(_d[50]),r(_d[51]),r(_d[52]),r(_d[53]),r(_d[54]),r(_d[55]),r(_d[56]),r(_d[57]),r(_d[58]),r(_d[59]),r(_d[60]),r(_d[61]),r(_d[62]),r(_d[63]),r(_d[64]),r(_d[65]),r(_d[66]),r(_d[67]),r(_d[68]),r(_d[69]),r(_d[70]),r(_d[71]),r(_d[72]),r(_d[73]),r(_d[74]),r(_d[75]),r(_d[76]),r(_d[77]),r(_d[78]),r(_d[79]),r(_d[80]);const M=({appName:e,onComplete:t,onReset:o,onClose:s})=>{let[l,d]=(0,i.useState)(""),[m,j]=(0,i.useState)(!1),[M,C]=(0,i.useState)(null),[b,k]=(0,i.useState)("enroll"),{initEnrollmentWithSms:F,submitEnrollmentWithSms:E}=(0,f.d)(),{data:P}=(0,x.a)(),T=(0,h.u)();function B(){P?.mfaEnrollmentFlow?.onSuccess(),t()}return M?(0,n.jsx)(S.ErrorScreenView,{allowlistConfig:T.allowlistConfig,error:M,onBack:()=>C(null),onRetry:()=>C(null)}):(0,n.jsxs)(n.Fragment,"enroll"===b?{children:[(0,n.jsx)(u.M,{backFn:o,onClose:s},"header"),(0,n.jsx)(g.I,{style:{marginBottom:"1.5rem"},children:(0,n.jsx)(p.default,{})}),(0,n.jsx)(g.T,{children:"Set up SMS verification"}),(0,n.jsxs)(g.S,{children:["We'll text a verification code to this mobile device whenever you use your ",e," ","wallet."]}),(0,n.jsxs)(g.C,{children:[(0,n.jsx)(w.C,{onSubmit:async function({qualifiedPhoneNumber:e}){try{await F({phoneNumber:e}),d(e),k("verify")}catch(e){C(e)}},hideRecent:!0}),(0,n.jsxs)(g.a,{children:["By providing your mobile number, you agree to receive text messages from ",T?.name,". Some carrier charges may apply"]})]}),(0,n.jsx)(u.a,{})]}:m?{children:[(0,n.jsx)(u.M,{onClose:B},"header"),(0,n.jsx)(g.I,{style:{marginBottom:"1.5rem"},children:(0,n.jsx)(y.default,{})}),(0,n.jsx)(g.T,{children:"SMS verification added"}),(0,n.jsxs)(g.S,{children:["From now on, you'll enter the verification code sent to your mobile device whenever you use your ",e," wallet."]}),(0,n.jsx)(g.B,{children:(0,n.jsx)(c.P,{onClick:B,children:"Done"})}),(0,n.jsx)(u.a,{})]}:{children:[(0,n.jsx)(u.M,{backFn:function(){"verify"===b?k("enroll"):o()},onClose:s},"header"),(0,n.jsx)(g.I,{style:{marginBottom:"1.5rem"},children:(0,n.jsx)(p.default,{})}),(0,n.jsx)(g.T,{children:"Enter enrollment code"}),(0,n.jsxs)(g.C,{children:[(0,n.jsx)(g.N,{onChange:async function(e){try{if(!e)return;await E({phoneNumber:l,mfaCode:e}),j(!0)}catch(e){if((0,f.f)(e))throw Error("You have exceeded the maximum number of attempts. Please close this window and try again in 10 seconds.");if((0,f.g)(e))throw Error("The code you entered is not valid");if((0,f.h)(e))throw Error("You have exceeded the time limit for code entry. Please try again in 30 seconds.");throw(0,f.i)(e)?Error("Verification canceled"):Error("Unknown error")}}}),(0,n.jsxs)(g.S,{children:["To continue, enter the 6-digit code sent to ",(0,n.jsx)("strong",{children:(0,v.lastFourDigits)(l)})]})]}),(0,n.jsx)(u.a,{})]})},C={component:()=>{let{user:e,enrollInMfa:y,ready:p}=(0,x.u)(),[v,w]=(0,i.useState)(null),{unenrollWithSms:S,unenrollWithTotp:C,unenrollWithPasskey:b,submitEnrollmentWithTotp:k,initEnrollmentWithPasskey:F,submitEnrollmentWithPasskey:E,initEnrollmentWithTotp:P}=(0,f.d)(),{data:T,onUserCloseViaDialogOrKeybindRef:B}=(0,x.a)(),R=(0,h.u)(),{closePrivyModal:I}=(0,m.u)(),{promptMfa:W}=(0,f.u)(),[O,A]=(0,i.useState)(!1),[N,U]=(0,i.useState)(null),[L,_]=(0,i.useState)(null),D=()=>{I({shouldCallAuthOnSuccess:!0}),y(!1),setTimeout(()=>{w(null),U(null)},500)},[V,Y]=(0,i.useState)(!1),[$,q]=(0,i.useState)();B.current=D;let H=e?.mfaMethods.includes("sms"),K=!!e?.phone,z=e?.mfaMethods.includes("totp"),G=e?.mfaMethods.includes("passkey"),J=H||z||G,Q=e?.linkedAccounts.filter(e=>"passkey"===e.type).map(e=>e.credentialId)??[];function X(){w(null),U(null)}async function Z(e=Q){Y(!0);try{return await F(),await E({credentialIds:e},{removeForLogin:T?.mfaEnrollmentFlow?.shouldUnlinkOnUnenrollMfa}),T?.mfaEnrollmentFlow?.onSuccess(),D()}catch(e){q(e)}finally{Y(!1)}}if((0,i.useEffect)(()=>{J&&A(!0)},[J]),!p||!e||!R)return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(u.M,{onClose:D},"header"),(0,n.jsx)(g.A,{children:(0,n.jsx)(j.M,{})}),(0,n.jsx)(g.C,{children:(0,n.jsx)(d.L,{})}),(0,n.jsx)(u.a,{})]});if("sms"===v)return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(u.M,{backFn:X,onClose:D},"header"),(0,n.jsx)(g.I,{style:{marginBottom:"1.5rem"},children:(0,n.jsx)(t.default,{})}),(0,n.jsx)(g.T,{children:"Remove SMS verification?"}),(0,n.jsxs)(g.S,{children:["MFA adds an extra layer of security to your ",R?.name," account. Make sure you have other methods to secure your account."]}),(0,n.jsx)(g.B,{children:(0,n.jsx)(c.P,{$warn:!0,onClick:async function(){w(null);try{await S()}catch(e){w(null)}},children:"Remove"})}),(0,n.jsx)(u.a,{})]});if("totp"===v)return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(u.M,{backFn:X,onClose:D},"header"),(0,n.jsx)(g.I,{style:{marginBottom:"1.5rem"},children:(0,n.jsx)(t.default,{})}),(0,n.jsx)(g.T,{children:"Remove authenticator app verification?"}),(0,n.jsxs)(g.S,{children:["MFA adds an extra layer of security to your ",R?.name," account. Make sure you have other methods to secure your account."]}),(0,n.jsx)(g.B,{children:(0,n.jsx)(c.P,{$warn:!0,onClick:async function(){w(null);try{await C()}catch(e){w(null)}},children:"Remove"})}),(0,n.jsx)(u.a,{})]});if("passkey"===v){let e=T?.mfaEnrollmentFlow?.shouldUnlinkOnUnenrollMfa??!0;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(u.M,{backFn:X,onClose:D},"header"),(0,n.jsx)(g.I,{style:{marginBottom:"1.5rem"},children:(0,n.jsx)(t.default,{})}),(0,n.jsx)(g.T,{children:"Are you sure you want to remove this passkey?"}),(0,n.jsx)(g.S,{children:e?"Removing your passkey will remove as both a verification method and a login method.":"Removing your passkey will remove as a verification method."}),(0,n.jsx)(g.B,{children:(0,n.jsx)(c.P,{$warn:!0,onClick:async function(){w(null);try{await b({removeForLogin:T?.mfaEnrollmentFlow?.shouldUnlinkOnUnenrollMfa})}catch(e){w(null)}},children:"Remove"})}),(0,n.jsx)(u.a,{})]})}if(0===T.mfaEnrollmentFlow.mfaMethods.length&&!J)return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(u.M,{onClose:D},"header"),(0,n.jsx)(g.I,{style:{marginBottom:"1.5rem"},children:(0,n.jsx)(o.default,{})}),(0,n.jsx)(g.T,{children:"Add more security"}),(0,n.jsxs)(g.S,{children:[R?.name," does not have any verification methods enabled."]}),(0,n.jsx)(g.B,{children:(0,n.jsx)(c.P,{onClick:D,children:"Close"})}),(0,n.jsx)(u.a,{})]});let ee=!J&&!O;return ee?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(u.M,{onClose:D},"header"),(0,n.jsx)(g.I,{style:{marginBottom:"1.5rem"},children:(0,n.jsx)(o.default,{})}),(0,n.jsx)(g.T,{children:"Transaction Protection"}),(0,n.jsx)(g.S,{children:"Set up transaction protection to add an extra layer of security to your account"}),(0,n.jsxs)(g.L,{children:[(0,n.jsxs)(g.b,{children:[(0,n.jsx)(g.c,{children:(0,n.jsx)(s.default,{})}),"Enable 2-Step verification for your ",R?.name," wallet."]}),(0,n.jsxs)(g.b,{children:[(0,n.jsx)(g.c,{children:(0,n.jsx)(l.default,{})}),"You'll be prompted to authenticate to complete transactions."]})]}),(0,n.jsxs)(g.B,{children:[(0,n.jsx)(c.P,{onClick:()=>A(!0),children:"Continue"}),(0,n.jsx)(c.S,{onClick:D,children:"Not now"})]}),(0,n.jsx)(u.a,{})]}):"sms"===N?(0,n.jsx)(M,{appName:R?.name||"Privy",onComplete:D,onReset:X,onClose:D}):"totp"===N&&L?(0,n.jsx)(j.E,{onClose:D,onReset:X,submitEnrollmentWithTotp:({mfaCode:e})=>(async function(e){try{return q(void 0),await k({mfaCode:e}),T?.mfaEnrollmentFlow?.onSuccess(),D()}catch(e){q(e)}finally{w(null)}})(e),totpInfo:Object.assign({},L,{appName:R?.name||"Privy"})}):"passkey"===N?(0,n.jsx)(j.a,{onReset:X,onClose:D,submitEnrollmentWithPasskey:Z}):(0,n.jsx)(j.b,{showIntro:ee,userMfaMethods:e.mfaMethods,appMfaMethods:R.mfa.methods,userHasAuthSms:K,backFn:function(){A(!1)},handleSelectMethod:async function(e){try{await W()}catch(e){return void q(e)}return"totp"===e?(U(e),_(null),void P().then(e=>{_(e)}).catch(()=>{_(null),X()})):"passkey"===e&&1===Q.length?await Z():void U(e)},isTotpLoading:"totp"===N&&!L,isPasskeyLoading:V,error:$,onClose:D,setRemovingMfaMethod:async e=>{try{await W()}catch(e){return void q(e)}w(e)}})}}},4245,[16,4578,4677,4691,4692,14,4573,1564,4575,1557,1559,1556,783,4678,4592,4625,784,4634,4679,4228,1568,1565,1589,1591,1341,1592,943,1160,1593,1594,4576,4577,4579,1558,1560,1358,819,1595,1343,1654,1657,1660,1661,1662,1663,1871,3739,1389,3741,787,3742,1374,3748,3894,3895,4680,4681,4633,4682,4612,4608,4683,4684,4239,4571,4672,4572,4574,4580,4659,4585,4593,4685,4640,4609,4610,4615,4686,4586,4587,4598]);
__d(function(g,r,i,a,m,e,d){var t=r(d[0]);const l=["title","titleId"],n=r(d[1]);function o(o,c){let{title:s,titleId:u}=o,f=t(o,l);return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:c,"aria-labelledby":u},f),s?n.createElement("title",{id:u},s):null,n.createElement("path",{fillRule:"evenodd",d:"M8.603 3.799A4.49 4.49 0 0 1 12 2.25c1.357 0 2.573.6 3.397 1.549a4.49 4.49 0 0 1 3.498 1.307 4.491 4.491 0 0 1 1.307 3.497A4.49 4.49 0 0 1 21.75 12a4.49 4.49 0 0 1-1.549 3.397 4.491 4.491 0 0 1-1.307 3.497 4.491 4.491 0 0 1-3.497 1.307A4.49 4.49 0 0 1 12 21.75a4.49 4.49 0 0 1-3.397-1.549 4.49 4.49 0 0 1-3.498-1.306 4.491 4.491 0 0 1-1.307-3.498A4.49 4.49 0 0 1 2.25 12c0-1.357.6-2.573 1.549-3.397a4.49 4.49 0 0 1 1.307-3.497 4.49 4.49 0 0 1 3.497-1.307Zm7.007 6.387a.75.75 0 1 0-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 0 0-1.06 1.06l2.25 2.25a.75.75 0 0 0 1.14-.094l3.75-5.25Z",clipRule:"evenodd"}))}const c=n.forwardRef(o);m.exports=c},4691,[289,14]);
__d(function(g,r,i,a,m,e,d){var t=r(d[0]);const l=["title","titleId"],n=r(d[1]);function o(o,c){let{title:s,titleId:h}=o,u=t(o,l);return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:c,"aria-labelledby":h},u),s?n.createElement("title",{id:h},s):null,n.createElement("path",{fillRule:"evenodd",d:"M4.5 3.75a3 3 0 0 0-3 3v10.5a3 3 0 0 0 3 3h15a3 3 0 0 0 3-3V6.75a3 3 0 0 0-3-3h-15Zm4.125 3a2.25 2.25 0 1 0 0 4.5 2.25 2.25 0 0 0 0-4.5Zm-3.873 8.703a4.126 4.126 0 0 1 7.746 0 .75.75 0 0 1-.351.92 7.47 7.47 0 0 1-3.522.877 7.47 7.47 0 0 1-3.522-.877.75.75 0 0 1-.351-.92ZM15 8.25a.75.75 0 0 0 0 1.5h3.75a.75.75 0 0 0 0-1.5H15ZM14.25 12a.75.75 0 0 1 .75-.75h3.75a.75.75 0 0 1 0 1.5H15a.75.75 0 0 1-.75-.75Zm.75 2.25a.75.75 0 0 0 0 1.5h3.75a.75.75 0 0 0 0-1.5H15Z",clipRule:"evenodd"}))}const c=n.forwardRef(o);m.exports=c},4692,[289,14]);