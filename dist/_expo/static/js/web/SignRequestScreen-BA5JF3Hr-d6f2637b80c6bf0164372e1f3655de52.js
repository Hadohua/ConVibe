__d(function(_g,_r,_i,_a,_m,_e,_d){"use strict";Object.defineProperty(_e,'__esModule',{value:!0}),Object.defineProperty(_e,"SignRequestScreen",{enumerable:!0,get:function(){return S}}),Object.defineProperty(_e,"SignRequestView",{enumerable:!0,get:function(){return C}}),Object.defineProperty(_e,"default",{enumerable:!0,get:function(){return S}});var e=_r(_d[0]),t=_r(_d[1]),n=_r(_d[2]),i=_r(_d[3]),r=_r(_d[4]),s=_r(_d[5]),o=_r(_d[6]),a=_r(_d[7]),l=_r(_d[8]),c=_r(_d[9]),d=_r(_d[10]),u=_r(_d[11]),g=_r(_d[12]),p=_r(_d[13]),y=_r(_d[14]);_r(_d[15]),_r(_d[16]),_r(_d[17]),_r(_d[18]),_r(_d[19]),_r(_d[20]),_r(_d[21]),_r(_d[22]),_r(_d[23]),_r(_d[24]),_r(_d[25]),_r(_d[26]),_r(_d[27]),_r(_d[28]),_r(_d[29]),_r(_d[30]),_r(_d[31]),_r(_d[32]),_r(_d[33]);const m=r.styled.img.withConfig({displayName:"StyledLogo",componentId:"sc-68c1b1ea-0"})(["&&{height:",";width:",";border-radius:16px;margin-bottom:12px;}"],e=>"sm"===e.size?"65px":"140px",e=>"sm"===e.size?"65px":"140px");let h=e=>{if(!(0,s.isHex)(e))return e;try{let t=(0,s.hexToString)(e);return t.includes("\ufffd")?e:t}catch{return e}},x=e=>{try{let n=t.base64.decode(e),i=(new TextDecoder).decode(n);return i.includes("\ufffd")?e:i}catch{return e}},f=t=>{let{types:n,primaryType:i,...r}=t.typedData;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(E,{data:r}),(0,e.jsx)(a.C,{text:(s=t.typedData,JSON.stringify(s,null,2)),itemName:"full payload to clipboard"})," "]});var s};const C=({method:t,messageData:i,copy:r,iconUrl:s,isLoading:o,success:a,walletProxyIsLoading:c,errorMessage:d,isCancellable:u,onSign:g,onCancel:p,onClose:C})=>(0,e.jsx)(y.S,{title:r.title,subtitle:r.description,showClose:!0,onClose:C,icon:n.Edit,iconVariant:"subtle",helpText:d?(0,e.jsx)(w,{children:d}):void 0,primaryCta:{label:r.buttonText,onClick:g,disabled:o||a||c,loading:o},secondaryCta:u?{label:"Not now",onClick:p,disabled:o||a||c}:void 0,watermark:!0,children:(0,e.jsxs)(l.a,{children:[s?(0,e.jsx)(m,{style:{alignSelf:"center"},size:"sm",src:s,alt:"app image"}):null,(0,e.jsxs)(b,{children:["personal_sign"===t&&(0,e.jsx)(j,{children:h(i)}),"eth_signTypedData_v4"===t&&(0,e.jsx)(f,{typedData:i}),"solana_signMessage"===t&&(0,e.jsx)(j,{children:x(i)})]})]})}),S={component:()=>{let{authenticated:t}=(0,p.u)(),{initializeWalletProxy:n,closePrivyModal:r}=(0,g.u)(),{navigate:s,data:a,onUserCloseViaDialogOrKeybindRef:l}=(0,p.a)(),[c,y]=(0,i.useState)(!0),[m,h]=(0,i.useState)(""),[x,f]=(0,i.useState)(),[S,b]=(0,i.useState)(null),[w,E]=(0,i.useState)(!1);(0,i.useEffect)(()=>{t||s("LandingScreen")},[t]),(0,i.useEffect)(()=>{n(u.W).then(e=>{y(!1),e||(h("An error has occurred, please try again."),f(new d.P(new d.j(m,o.ProviderErrors.E32603_DEFAULT_INTERNAL_ERROR.eipCode))))})},[]);let{method:j,data:T,confirmAndSign:_,onSuccess:v,onFailure:P,uiOptions:R}=a.signMessage,D={title:R?.title||"Sign message",description:R?.description||"Signing this message will not cost you any fees.",buttonText:R?.buttonText||"Sign and continue"},N=e=>{e?v(e):P(x||new d.P(new d.j("The user rejected the request.",o.ProviderErrors.E4001_USER_REJECTED_REQUEST.eipCode))),r({shouldCallAuthOnSuccess:!1}),setTimeout(()=>{b(null),h(""),f(void 0)},200)};return l.current=()=>{N(S)},(0,e.jsx)(C,{method:j,messageData:T,copy:D,iconUrl:R?.iconUrl&&"string"==typeof R.iconUrl?R.iconUrl:void 0,isLoading:w,success:null!==S,walletProxyIsLoading:c,errorMessage:m,isCancellable:R?.isCancellable,onSign:async()=>{E(!0),h("");try{let e=await _();b(e),E(!1),setTimeout(()=>{N(e)},u.q)}catch(e){console.error(e),h("An error has occurred, please try again."),f(new d.P(new d.j(m,o.ProviderErrors.E32603_DEFAULT_INTERNAL_ERROR.eipCode))),E(!1)}},onCancel:()=>N(null),onClose:()=>N(S)})}};let b=r.styled.div.withConfig({displayName:"MessageContainer",componentId:"sc-124260c0-0"})(["flex:1;display:flex;flex-direction:column;gap:16px;"]),w=r.styled.p.withConfig({displayName:"ErrorText",componentId:"sc-124260c0-1"})(["&&{margin:0;width:100%;text-align:center;color:var(--privy-color-error-dark);font-size:14px;line-height:22px;}"]),E=(0,r.styled)(c.D).withConfig({displayName:"StyledDisplayJsonTree",componentId:"sc-124260c0-2"})(["margin-top:0;"]),j=(0,r.styled)(c.M).withConfig({displayName:"StyledMessage",componentId:"sc-124260c0-3"})(["margin-top:0;"])},5804,[5,2691,7957,3,6277,792,2129,5740,5648,5800,2539,2509,2511,2508,5243,5583,2293,2510,6275,5244,2523,2524,2537,2540,1019,2621,2622,5245,5246,5247,5248,5249,5250,5251]);