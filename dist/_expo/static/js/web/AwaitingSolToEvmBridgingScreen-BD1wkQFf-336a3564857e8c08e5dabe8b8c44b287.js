__d(function(g,_r,i,_a,m,_e,d){"use strict";Object.defineProperty(_e,'__esModule',{value:!0}),Object.defineProperty(_e,"AwaitingSolToEvmBridgingScreen",{enumerable:!0,get:function(){return A}}),Object.defineProperty(_e,"default",{enumerable:!0,get:function(){return A}});var e,n=_r(d[0]),t=_r(d[1]),a=(e=t)&&e.__esModule?e:{default:e},r=_r(d[2]),s=_r(d[3]),o=_r(d[4]),l=_r(d[5]),c=_r(d[6]),u=_r(d[7]),f=_r(d[8]),h=_r(d[9]),p=_r(d[10]),v=_r(d[11]),w=_r(d[12]),S=_r(d[13]),T=_r(d[14]),b=_r(d[15]),C=_r(d[16]),y=_r(d[17]),I=_r(d[18]);_r(d[19]),_r(d[20]),_r(d[21]),_r(d[22]),_r(d[23]),_r(d[24]),_r(d[25]),_r(d[26]),_r(d[27]),_r(d[28]),_r(d[29]),_r(d[30]),_r(d[31]),_r(d[32]),_r(d[33]),_r(d[34]),_r(d[35]),_r(d[36]),_r(d[37]),_r(d[38]),_r(d[39]),_r(d[40]),_r(d[41]),_r(d[42]);const A={component:function(){let e=(0,p.u)(),{closePrivyModal:t,createAnalyticsEvent:A,connectors:x}=(0,v.u)(),{navigate:E,setModalData:F,data:N}=(0,S.a)(),U=(0,p.u)(),j=(0,r.useRef)(!1),R=(0,C.c)(),[_,W]=(0,r.useState)(!1),[B,P]=(0,r.useState)(!1),[D,O]=(0,r.useState)(null),[$,k]=(0,r.useState)(),[L,M]=(0,r.useState)();if(!N?.funding||"ethereum"!==N.funding.chainType)throw Error("Invalid funding data");let{amount:q,connectedWallet:H,chain:Q,solanaChain:V,isUSDC:Y}=N.funding,z=N.funding.address,G=N.funding.erc20Address,J=N.funding.isUSDC?"USDC":Q.nativeCurrency.symbol,K=(0,r.useMemo)(()=>"solana"===H?.type?H.provider:(function({connectors:e,connectedWalletAddress:n}){let t=e.find(e=>"solana"===e.chainType&&e.wallets.some(e=>e.address===n)),a=t?.wallet.accounts.find(e=>e.address===n);if(!t||!a)throw new v.a("Unable to find source wallet connector");return new o.ConnectedStandardSolanaWallet({wallet:t.wallet,account:a})})({connectors:x,connectedWalletAddress:H?.address||""}),[H,x]),X=(0,r.useMemo)(()=>{let n=R(C.S);if(!n)throw new v.a("Unable to load solana plugin");let t=e.solanaRpcs["solana:mainnet"];if(!t)throw new v.a("Unable to load mainnet RPC");return n.getSolanaRpcClient({rpc:t.rpc,rpcSubscriptions:t.rpcSubscriptions,chain:"solana:mainnet",blockExplorerUrl:t.blockExplorerUrl??"https://explorer.solana.com"})},[]),Z=(0,w.Q)((0,I.t)(K?.standardWallet.name||"unknown")),ee=Z?.name||"wallet";return(0,r.useEffect)(()=>{(async function(){if(!K||!Q||j.current)return;let e=R(C.S);if(!e)return void O(new v.a("Unable to solana plugin"));j.current=!0,Q?.testnet&&console.warn("Solana testnets are not supported for bridging");let n=Y?1e6*parseFloat(q):(0,s.parseEther)(q),t=await(0,b.g)({isTestnet:!!Q.testnet,input:(0,b.t)({appId:U.id,amount:n.toString(),user:K.address,recipient:z,destinationChainId:Q.id,originChainId:b.b,originCurrency:Y?b.d:b.a,destinationCurrency:Y?G:void 0})}).catch(console.error);if(!t)return void O(new v.a(`Unable to fetch quotes for bridging. Wallet ${(0,w.a6)(K.address)} does not have enough funds.`,void 0,v.b.INSUFFICIENT_BALANCE));let a=await e.createTransactionFromRelayQuote({quote:t,source:K.address,solanaClient:X});if(a)try{W(!0);let n=await e.simulateTransaction({solanaClient:X,tx:a});if(n.hasError)return n.hasFunds?(console.error("Transaction failed:",n.error),void O(new v.a("Something went wrong",void 0,v.b.TRANSACTION_FAILURE))):void O(new v.a(`Wallet ${(0,w.a6)(K?.address)} does not have enough funds. ${t.details.currencyIn.amountFormatted} ${J} are needed to complete the transaction.`,void 0,v.b.INSUFFICIENT_BALANCE));let{signature:r}=await K.signAndSendTransaction({chain:"solana:mainnet",transaction:a}),s=e.getAddressFromBuffer(r);k(s),M("pending")}catch(e){if(console.error(e),/user rejected the request/gi.test(e.message||""))return void O(new v.a("Transaction was rejected by the user",void 0,v.b.TRANSACTION_FAILURE));O(new v.a("Something went wrong",void 0,v.b.TRANSACTION_FAILURE))}else O(new v.a(`Unable to select bridge option from quotes. Wallet ${(0,w.a6)(K.address)} does not have enough funds.`,void 0,v.b.INSUFFICIENT_BALANCE))})().catch(console.error)},[]),(0,b.u)({transactionHash:$,isTestnet:!1,bridgingStatus:L,setBridgingStatus:M,onSuccess({transactionHash:e}){W(!1),P(!0),A({eventName:T.O,payload:{provider:"external",status:"success",txHash:e,address:K.address,chainType:"solana",clusterName:V,token:"SOL",destinationAddress:z,destinationChainId:Q.id,destinationChainType:"ethereum",destinationValue:q,destinationToken:Y?"USDC":"ETH"}})},onFailure({error:e}){W(!1),O(e)}}),(0,r.useEffect)(()=>{if(!B)return;let e=setTimeout(t,p.t);return()=>clearTimeout(e)},[B]),(0,r.useEffect)(()=>{D&&(F({funding:N?.funding,solanaFundingData:N?.solanaFundingData,sendTransaction:N?.sendTransaction,errorModalData:{error:D,previousScreen:"TransferFromWalletScreen"}}),E("ErrorScreen",!1))},[D]),B?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(f.t,{}),(0,n.jsx)(l.b,{}),(0,n.jsxs)(l.c,{children:[(0,n.jsx)(a.default,{color:"var(--privy-color-success)",width:"64px",height:"64px"}),(0,n.jsx)(u.C,{title:"Success!",description:`You\u2019ve successfully added ${q} ${J} to your ${U.name} wallet. It may take a minute before the funds are available to use.`})]}),(0,n.jsx)(l.R,{}),(0,n.jsx)(c.B,{})]}):_&&K?(0,n.jsx)(y.T,{walletClientType:(0,I.t)(K?.standardWallet.name||"unknown"),displayName:ee,addressToFund:z,isBridging:_,isErc20Flow:!1,chainId:Q.id,chainName:Q.name,totalPriceInUsd:void 0,totalPriceInNativeCurrency:void 0,gasPriceInUsd:void 0,gasPriceInNativeCurrency:void 0}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(f.t,{}),(0,n.jsx)(h.N,{}),(0,n.jsx)("div",{style:{marginTop:"1rem"}}),(0,n.jsx)(c.B,{})]})}}},5684,[5,5647,3,792,2129,5648,5246,5649,5650,5251,2509,2511,2523,2508,5653,5654,2690,5674,2539,6277,5247,5248,5249,5250,2510,6275,2524,2537,2540,1019,2621,2622,5675,5665,5660,5661,5662,5676,7957,5244,5667,5668,2293]);