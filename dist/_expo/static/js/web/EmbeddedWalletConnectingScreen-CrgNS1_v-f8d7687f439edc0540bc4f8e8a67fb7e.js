__d(function(_g,_r,i,a,_m,_e,_d){"use strict";Object.defineProperty(_e,'__esModule',{value:!0}),Object.defineProperty(_e,"EmbeddedWalletConnectingScreen",{enumerable:!0,get:function(){return s}}),Object.defineProperty(_e,"EmbeddedWalletConnectingView",{enumerable:!0,get:function(){return d}}),Object.defineProperty(_e,"default",{enumerable:!0,get:function(){return s}});var e=_r(_d[0]),t=_r(_d[1]),r=_r(_d[2]),n=_r(_d[3]),o=_r(_d[4]),l=_r(_d[5]),c=_r(_d[6]);_r(_d[7]),_r(_d[8]),_r(_d[9]),_r(_d[10]),_r(_d[11]),_r(_d[12]),_r(_d[13]),_r(_d[14]),_r(_d[15]),_r(_d[16]),_r(_d[17]),_r(_d[18]),_r(_d[19]),_r(_d[20]),_r(_d[21]),_r(_d[22]),_r(_d[23]),_r(_d[24]),_r(_d[25]),_r(_d[26]),_r(_d[27]),_r(_d[28]),_r(_d[29]),_r(_d[30]),_r(_d[31]),_r(_d[32]),_r(_d[33]),_r(_d[34]),_r(_d[35]),_r(_d[36]),_r(_d[37]),_r(_d[38]),_r(_d[39]),_r(_d[40]),_r(_d[41]),_r(_d[42]),_r(_d[43]),_r(_d[44]),_r(_d[45]),_r(_d[46]),_r(_d[47]),_r(_d[48]),_r(_d[49]);const d=({connectionFailed:r,onClose:n})=>(0,e.jsx)(c.S,r?{title:"Something went wrong",subtitle:"We're on it. Please try again later.",icon:t.XCircle,iconVariant:"error",primaryCta:{label:"Close",onClick:n},watermark:!0}:{title:"Connecting to your wallet",subtitle:"Please wait...",iconVariant:"loading",showClose:!0,onClose:n,watermark:!1}),s={component:()=>{let{authenticated:t,user:c}=(0,l.u)(),{client:s,closePrivyModal:u,createAnalyticsEvent:y,walletProxy:v}=(0,o.u)(),{navigate:f,data:p,setModalData:b,onUserCloseViaDialogOrKeybindRef:w}=(0,l.a)(),h=(0,r.useMemo)(()=>Date.now(),[]),[m,C]=(0,r.useState)(!1),{onCompleteNavigateTo:g,onFailure:A,shouldForceMFA:I,entropyId:P,entropyIdVerifier:_,recoveryMethod:S,connectingWalletAddress:E,isUnifiedWallet:O=!1}=p?.connectWallet,T=e=>{m||(C(!0),A("string"==typeof e?Error(e):e))};return(0,r.useEffect)(()=>{let e;return t?v?((async()=>{let t=await s.getAccessToken();if(!t)return T("User must be authenticated and have a Privy wallet before it can be connected");try{if(!O){if(!P||!_)return T("For on-device first-class chain wallets, entropyId and entropyIdVerifier are required");await v.connect({accessToken:t,entropyId:P,entropyIdVerifier:_})}I&&await v.verifyMfa({accessToken:t});let r=(Date.now()-h)/1e3;"EmbeddedWalletKeyExportScreen"===g&&r<1?e=setTimeout(()=>{f(g,!1)},1e3*(1-r)):f(g,!1)}catch(e){if((0,n.e)(e)&&"privy"===S){let e=await s.getAccessToken();if(!e)return T("User must be authenticated and have a Privy wallet before it can be recovered");try{y({eventName:"embedded_wallet_pinless_recovery_started",payload:{walletAddress:E}});let t=await(v?.recover({accessToken:e,entropyId:P,entropyIdVerifier:_}));t?.entropyId||T(Error("Unable to recover wallet")),g?f(g):u({shouldCallAuthOnSuccess:!1}),y({eventName:"embedded_wallet_recovery_completed",payload:{walletAddress:E}}),f(g)}catch(e){T("An error has occurred, please try again.")}}else(0,n.e)(e)&&"privy"!==S&&"privy-v2"!==S?(b({...p,recoverWallet:{entropyId:P,entropyIdVerifier:_,onCompleteNavigateTo:g,onFailure:A},recoveryOAuthStatus:{provider:S,action:"recover",isInAccountCreateFlow:!1,shouldCreateEth:!1,shouldCreateSol:!1}}),f((0,n.c)(S))):T(e)}})(),()=>clearTimeout(e)):void 0:T("User must be authenticated and have a Privy wallet before it can be connected")},[t,c,v]),w.current=()=>{T("User exited before wallet could be connected"),u({shouldCallAuthOnSuccess:!1})},(0,e.jsx)(d,{connectionFailed:m,onClose:()=>u({shouldCallAuthOnSuccess:!1})})}}},5709,[5,7957,3,2128,2511,2508,5243,2129,2310,2164,2293,2523,2524,2509,2510,6277,2537,2539,2540,792,1019,2621,2622,2623,2295,2683,2686,2689,2690,2691,2692,2900,4618,6275,2341,4620,2132,4621,2326,7827,4873,4874,5244,5245,5246,5247,5248,5249,5250,5251]);