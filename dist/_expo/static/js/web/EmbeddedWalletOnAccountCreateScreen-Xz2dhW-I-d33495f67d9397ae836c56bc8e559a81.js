__d(function(_g,_r,i,a,m,_e,d){"use strict";Object.defineProperty(_e,'__esModule',{value:!0}),Object.defineProperty(_e,"EmbeddedWalletOnAccountCreateScreen",{enumerable:!0,get:function(){return h}}),Object.defineProperty(_e,"EmbeddedWalletOnAccountCreateView",{enumerable:!0,get:function(){return w}}),Object.defineProperty(_e,"default",{enumerable:!0,get:function(){return h}});var e=_r(d[0]),t=_r(d[1]),l=_r(d[2]),r=_r(d[3]),n=_r(d[4]),o=_r(d[5]),s=_r(d[6]),c=_r(d[7]),u=_r(d[8]);_r(d[9]),_r(d[10]),_r(d[11]),_r(d[12]),_r(d[13]),_r(d[14]),_r(d[15]),_r(d[16]),_r(d[17]),_r(d[18]),_r(d[19]),_r(d[20]),_r(d[21]),_r(d[22]),_r(d[23]),_r(d[24]),_r(d[25]),_r(d[26]),_r(d[27]),_r(d[28]),_r(d[29]),_r(d[30]),_r(d[31]),_r(d[32]),_r(d[33]),_r(d[34]),_r(d[35]),_r(d[36]),_r(d[37]),_r(d[38]),_r(d[39]),_r(d[40]),_r(d[41]),_r(d[42]),_r(d[43]),_r(d[44]),_r(d[45]),_r(d[46]),_r(d[47]),_r(d[48]),_r(d[49]),_r(d[50]);const w=({errorMessage:l,onClose:r})=>(0,e.jsx)(u.S,l?{title:"Something went wrong",subtitle:l,icon:t.XCircle,iconVariant:"error",primaryCta:{label:"Close",onClick:r},watermark:!0}:{title:"Creating your wallet",subtitle:"Please wait...",iconVariant:"loading",watermark:!1}),h={component:()=>{let{setModalData:t,navigate:u,data:h,onUserCloseViaDialogOrKeybindRef:y}=(0,c.a)(),b=(0,r.u)(),[C,g]=(0,l.useState)(""),{embeddedWallets:f}=(0,r.u)(),{authenticated:O,user:S}=(0,c.u)(),{closePrivyModal:v,walletProxy:W,client:p}=(0,o.u)(),{onSuccess:A,onFailure:P,callAuthOnSuccessOnClose:E,shouldCreateEth:x,shouldCreateSol:U}=h.createWallet,R="legacy-embedded-wallets-only"===b.embeddedWallets.mode&&!0===b?.embeddedWallets.requireUserOwnedRecoveryOnCreate,[j,M]=(0,l.useState)(null),{create:k}=(0,s.u)(),I=x??(!!S&&(0,n.s)(S,b.embeddedWallets.ethereum.createOnLogin)),T=U??(!!S&&(0,n.k)(S,b.embeddedWallets.solana.createOnLogin)),V=new n.R(async()=>{let e=await p.getAccessToken();if(S&&e&&W)try{let e;if(I&&T)e=await k({chainType:"ethereum",walletIndex:0,latestUser:S}),e=await k({chainType:"solana",walletIndex:0,latestUser:e.user});else if(T)e=await k({chainType:"solana",walletIndex:0,latestUser:S});else{if(!I)return void v({shouldCallAuthOnSuccess:E});e=await k({chainType:"ethereum",walletIndex:0,latestUser:S})}M(e),u("EmbeddedWalletCreatedScreen")}catch(e){g(e.message)}});return(0,l.useEffect)(()=>O&&S?R?(t({...h,createWallet:{...h.createWallet,shouldCreateEth:I,shouldCreateSol:T},recoverySelection:{...h?.recoverySelection,isInAccountCreateFlow:!0,shouldCreateEth:I,shouldCreateSol:T}}),u((0,n.E)({walletAction:"create",showAutomaticRecovery:!1,availableRecoveryMethods:f.userOwnedRecoveryOptions,legacySetWalletPasswordFlow:!1,isResettingPassword:!1}))):void V.execute():(u("LandingScreen"),void P(Error("User must be authenticated before creating a Privy wallet"))),[R,O]),y.current=()=>null,(0,e.jsx)(w,{errorMessage:C||void 0,onClose:()=>{j?(A(j),v({shouldCallAuthOnSuccess:E})):(P(new o.m("User wallet creation failed")),v({shouldCallAuthOnSuccess:!1}))}})}}},5714,[5,7957,3,2509,2128,2511,5715,2508,5243,2129,2510,2310,2164,2293,2523,2524,6277,2537,2539,2540,792,1019,2621,2622,2623,2295,2683,2686,2689,2690,2691,2692,2900,4618,6275,2341,4620,2132,4621,2326,7827,4873,4874,5244,5245,5246,5247,5248,5249,5250,5251]);