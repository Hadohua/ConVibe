__d(function(_g,_r,_i,a,m,_e,d){"use strict";Object.defineProperty(_e,'__esModule',{value:!0}),Object.defineProperty(_e,"UpdateEmailScreen",{enumerable:!0,get:function(){return E}}),Object.defineProperty(_e,"UpdateEmailScreenView",{enumerable:!0,get:function(){return y}}),Object.defineProperty(_e,"default",{enumerable:!0,get:function(){return E}});var e,t=_r(d[0]),r=_r(d[1]),i=(e=r)&&e.__esModule?e:{default:e},n=_r(d[2]),l=_r(d[3]),s=_r(d[4]),o=_r(d[5]),c=_r(d[6]),u=_r(d[7]),h=_r(d[8]),p=_r(d[9]),f=_r(d[10]),g=_r(d[11]),S=_r(d[12]),b=_r(d[13]);_r(d[14]),_r(d[15]),_r(d[16]),_r(d[17]),_r(d[18]),_r(d[19]),_r(d[20]),_r(d[21]),_r(d[22]),_r(d[23]),_r(d[24]),_r(d[25]),_r(d[26]),_r(d[27]),_r(d[28]),_r(d[29]),_r(d[30]),_r(d[31]),_r(d[32]),_r(d[33]),_r(d[34]),_r(d[35]),_r(d[36]),_r(d[37]),_r(d[38]),_r(d[39]),_r(d[40]),_r(d[41]),_r(d[42]),_r(d[43]),_r(d[44]),_r(d[45]),_r(d[46]),_r(d[47]),_r(d[48]),_r(d[49]),_r(d[50]),_r(d[51]),_r(d[52]),_r(d[53]);const j=(0,s.forwardRef)((e,r)=>{let[i,n]=(0,s.useState)(""),[g,b]=(0,s.useState)(""),[j,y]=(0,s.useState)(!1),{authenticated:E,user:k}=(0,h.u)(),{initUpdateEmail:v}=(0,u.u)(),{navigate:P,setModalData:A,currentScreen:C}=(0,h.a)(),{enabled:U,token:M}=(0,c.a)(),T=(0,o.u)(),_=(0,p.a1)(i)&&(T.disablePlusEmails&&i.includes("+")?(g||b("Please enter a valid email address without a '+'."),!1):(g&&b(""),!0)),O=j||!_,q=()=>{!U||M||E?(async e=>{if(!k?.email)throw Error("User is required to have an email address to update it.");y(!0);try{await v({oldAddress:k.email.address,newAddress:i,captchaToken:e}),P("AwaitingPasswordlessCodeScreen")}catch(e){A({errorModalData:{error:e,previousScreen:C||"LandingScreen"}}),P("ErrorScreen")}y(!1)})(M):(A({captchaModalData:{callback:e=>{if(!k?.email)throw Error("User is required to have an email address to update it.");return v({oldAddress:k.email.address,newAddress:i,captchaToken:e})},userIntentRequired:!1,onSuccessNavigateTo:"AwaitingPasswordlessCodeScreen",onErrorNavigateTo:"ErrorScreen"}}),P("CaptchaScreen"))};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(w,{children:[g&&(0,t.jsx)(S.E,{style:{marginTop:"0.25rem",textAlign:"left"},children:g}),(0,t.jsxs)(x,{$error:!!g,children:[(0,t.jsx)(p.V,{children:(0,t.jsx)(l.Mail,{})}),(0,t.jsx)("input",{ref:r,id:"email-input",type:"email",placeholder:"your@email.com",onChange:e=>n(e.target.value),onKeyUp:e=>{"Enter"===e.key&&q()},value:i,autoComplete:"email"}),e.stacked?null:(0,t.jsx)(f.E,{isSubmitting:j,onClick:q,disabled:O,children:"Submit"})]})]}),e.stacked?(0,t.jsx)(f.P,{loadingText:null,loading:j,disabled:O,onClick:q,style:{width:"100%"},children:"Submit"}):null]})});let w=g.I,x=g.E;const y=({title:e="Update your email",subtitle:r="Add the email address you'd like to use going forward. We'll send you a confirmation code"})=>(0,t.jsx)(b.S,{title:e,subtitle:r,icon:i.default,watermark:!0,children:(0,t.jsx)(n.B,{children:(0,t.jsx)(j,{stacked:!0})})}),E={component:()=>(0,t.jsx)(y,{})}},4259,[16,4624,4593,4571,14,1557,783,1559,1556,1564,4573,4588,4589,4572,1568,784,1558,1358,819,1341,1594,1591,1595,1343,1654,1589,1160,1657,1660,1661,1592,1662,1565,1663,1871,3739,943,1593,1560,1389,3741,787,3742,1374,3748,3894,3895,4574,4575,4576,4577,4578,4579,4580]);