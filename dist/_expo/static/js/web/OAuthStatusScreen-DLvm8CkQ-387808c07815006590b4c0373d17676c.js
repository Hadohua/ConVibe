__d(function(_g,_r,_i,_a,_m,_e,_d){"use strict";const e=["iconUrl"];function t(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(_e,'__esModule',{value:!0}),Object.defineProperty(_e,"OAuthStatusScreen",{enumerable:!0,get:function(){return T}}),Object.defineProperty(_e,"OAuthStatusScreenView",{enumerable:!0,get:function(){return S}}),Object.defineProperty(_e,"default",{enumerable:!0,get:function(){return T}});var r=t(_r(_d[0])),o=_r(_d[1]),n=_r(_d[2]),a=t(n),i=_r(_d[3]),c=_r(_d[4]),d=t(_r(_d[5])),l=_r(_d[6]),s=_r(_d[7]),u=_r(_d[8]),m=_r(_d[9]),p=_r(_d[10]),f=_r(_d[11]),y=_r(_d[12]);_r(_d[13]),_r(_d[14]),_r(_d[15]),_r(_d[16]),_r(_d[17]),_r(_d[18]),_r(_d[19]),_r(_d[20]),_r(_d[21]),_r(_d[22]),_r(_d[23]),_r(_d[24]),_r(_d[25]),_r(_d[26]),_r(_d[27]),_r(_d[28]),_r(_d[29]),_r(_d[30]),_r(_d[31]),_r(_d[32]),_r(_d[33]),_r(_d[34]),_r(_d[35]),_r(_d[36]),_r(_d[37]),_r(_d[38]),_r(_d[39]),_r(_d[40]),_r(_d[41]),_r(_d[42]),_r(_d[43]),_r(_d[44]),_r(_d[45]),_r(_d[46]),_r(_d[47]),_r(_d[48]),_r(_d[49]),_r(_d[50]),_r(_d[51]),_r(_d[52]),_r(_d[53]),_r(_d[54]);const g=({style:e})=>(0,o.jsx)(d.default,{style:Object.assign({color:"var(--privy-color-error)"},e)});let h={google:{name:"Google",component:c.G},discord:{name:"Discord",component:c.D},github:{name:"Github",component:c.b},linkedin:{name:"LinkedIn",component:c.L},twitter:{name:"Twitter",component:c.a},spotify:{name:"Spotify",component:c.S},instagram:{name:"Instagram",component:c.I},tiktok:{name:"Tiktok",component:c.T},line:{name:"LINE",component:l.L},twitch:{name:"Twitch",component:l.T},apple:{name:"Apple",component:c.A}},v=t=>{let{iconUrl:o}=t,n=(0,r.default)(t,e);return a.default.createElement("svg",Object.assign({width:"33",height:"32",viewBox:"0 0 33 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n),a.default.createElement("foreignObject",{x:"2",y:"2",width:"29",height:"28"},a.default.createElement("img",{src:o,width:"29",height:"28",style:{display:"block",objectFit:"contain",borderRadius:"4px"},alt:"Provider icon"})))};const E=(e,t)=>{if(e in h)return h[e];if((0,i.i)(e)&&t){let r=t.find(t=>t.provider===e);if(r)return{name:r.provider_display_name,component:e=>a.default.createElement(v,Object.assign({},e,{iconUrl:r.provider_icon_url}))}}return{name:"Unknown",component:g}};function b(e,t,r){let o={detail:"",retryable:!1},n=(0,f.e)(t);if(e?.privyErrorCode===u.b.LINKED_TO_ANOTHER_USER&&(o.detail="This account has already been linked to another user."),e?.privyErrorCode===u.b.INVALID_CREDENTIALS&&(o.retryable=!0,o.detail="Something went wrong. Try again."),e.privyErrorCode===u.b.OAUTH_USER_DENIED&&(o.detail=`Retry and check ${n} to finish connecting your account.`,o.retryable=!0),e?.privyErrorCode===u.b.TOO_MANY_REQUESTS&&(o.detail="Too many requests. Please wait before trying again."),e?.privyErrorCode===u.b.TOO_MANY_REQUESTS&&e.message.includes("provider rate limit")){let e=E(t,r).name;o.detail=`Request limit reached for ${e}. Please wait a moment and try again.`}if(e?.privyErrorCode===u.b.OAUTH_ACCOUNT_SUSPENDED){let e=E(t,r).name;o.detail=`Your ${e} account is suspended. Please try another login method.`}return e?.privyErrorCode===u.b.CANNOT_LINK_MORE_OF_TYPE&&(o.detail="You cannot authorize more than one account for this user."),e?.privyErrorCode===u.b.OAUTH_UNEXPECTED&&t.startsWith("privy:")&&(o.detail="Something went wrong. Please try again."),o}const S=({providerName:e,ProviderLogo:t,success:r,errorMessage:n,onRetry:a})=>{let i=r?`Successfully connected with ${e}`:n?n.message:`Verifying connection to ${e}`;return(0,o.jsx)(p.S,{title:i,subtitle:r?"You're good to go!":n?n.detail:"Just a few moments more",icon:t,iconVariant:"loading",iconLoadingStatus:{success:r,fail:!!n},secondaryCta:n?.retryable&&a?{label:"Retry",onClick:a}:void 0,watermark:!0})},T={component:()=>{let{authenticated:e,logout:t,ready:r,user:a}=(0,i.u)(),{setModalData:c,navigate:d,resetNavigation:l}=(0,i.a)(),p=(0,s.u)(),{getAuthMeta:f,initLoginWithOAuth:g,loginWithOAuth:h,updateWallets:v,setReadyToTrue:T,closePrivyModal:_,createAnalyticsEvent:A}=(0,u.u)(),[O,C]=(0,n.useState)(!1),[w,R]=(0,n.useState)(void 0),N=f()?.provider||"google",{name:U,component:L}=E(N,p.customOAuthProviders);return(0,n.useEffect)(()=>{h(N).then(()=>{C(!0),T(!0)}).catch(e=>{if(T(!1),e?.privyErrorCode===u.b.ALLOWLIST_REJECTED)return R(void 0),l(),void d("AllowlistRejectionScreen");if(e?.privyErrorCode===u.b.USER_LIMIT_REACHED)return console.error(new u.k(e).toString()),R(void 0),l(),void d("UserLimitReachedScreen");if(e?.privyErrorCode===u.b.USER_DOES_NOT_EXIST)return R(void 0),l(),void d("AccountNotFoundScreen");if(e?.privyErrorCode===u.b.ACCOUNT_TRANSFER_REQUIRED&&e.data?.data?.nonce)return R(void 0),l(),c({accountTransfer:{nonce:e.data?.data?.nonce,account:e.data?.data?.subject,displayName:e.data?.data?.account?.displayName,linkMethod:f()?.provider,embeddedWalletAddress:e.data?.data?.otherUser?.embeddedWalletAddress,oAuthUserInfo:e.data?.data?.otherUser?.oAuthUserInfo}}),void d("LinkConflictScreen");let{retryable:t,detail:r}=b(e,N,p.customOAuthProviders);R({retryable:t,detail:r,message:"Authentication failed"})}).finally(()=>{(0,y.o)()})},[U,N]),(0,n.useEffect)(()=>{if(r&&e&&O&&a){if(p?.legal.requireUsersAcceptTerms&&!a.hasAcceptedTerms){let e=setTimeout(()=>{d("AffirmativeConsentScreen")},s.q);return()=>clearTimeout(e)}if((0,m.s)(a,p.embeddedWallets)){let e=setTimeout(()=>{c({createWallet:{onSuccess:()=>{},onFailure:e=>{console.error(e),A({eventName:"embedded_wallet_creation_failure_logout",payload:{error:e,provider:N,screen:"OAuthStatusScreen"}}),t()},callAuthOnSuccessOnClose:!0}}),d("EmbeddedWalletOnAccountCreateScreen")},s.q);return()=>clearTimeout(e)}{let e=setTimeout(()=>_({shouldCallAuthOnSuccess:!0,isSuccess:!0}),s.q);return v(),()=>clearTimeout(e)}}},[r,e,O,a]),(0,o.jsx)(S,{providerName:U,ProviderLogo:L,success:O,errorMessage:w,onRetry:w?.retryable?()=>{(0,y.o)(),g(N),R(void 0)}:void 0})},isShownBeforeReady:!0}},4247,[289,16,14,1556,4635,4614,4636,1557,1559,4581,4572,4675,783,943,784,1558,1560,4573,1568,1564,1565,1589,1591,1341,1592,1160,1593,1594,4574,4575,4576,4577,4578,4579,4580,1358,819,1595,1343,1654,1657,1660,1661,1662,1663,1871,3739,1389,3741,787,3742,1374,3748,3894,3895]);