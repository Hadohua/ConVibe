__d(function(_g,_r,_i,_a,_m,_e,_d){"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(_e,'__esModule',{value:!0}),Object.defineProperty(_e,"OAuthStatusScreen",{enumerable:!0,get:function(){return b}}),Object.defineProperty(_e,"OAuthStatusScreenView",{enumerable:!0,get:function(){return g}}),Object.defineProperty(_e,"default",{enumerable:!0,get:function(){return b}});var t=_r(_d[0]),r=_r(_d[1]),o=e(r),n=_r(_d[2]),a=_r(_d[3]),i=e(_r(_d[4])),c=_r(_d[5]),d=_r(_d[6]),l=_r(_d[7]),s=_r(_d[8]),u=_r(_d[9]),m=_r(_d[10]),p=_r(_d[11]);_r(_d[12]),_r(_d[13]),_r(_d[14]),_r(_d[15]),_r(_d[16]),_r(_d[17]),_r(_d[18]),_r(_d[19]),_r(_d[20]),_r(_d[21]),_r(_d[22]),_r(_d[23]),_r(_d[24]),_r(_d[25]),_r(_d[26]),_r(_d[27]),_r(_d[28]),_r(_d[29]),_r(_d[30]),_r(_d[31]),_r(_d[32]),_r(_d[33]),_r(_d[34]),_r(_d[35]),_r(_d[36]),_r(_d[37]),_r(_d[38]),_r(_d[39]),_r(_d[40]),_r(_d[41]),_r(_d[42]),_r(_d[43]),_r(_d[44]),_r(_d[45]),_r(_d[46]),_r(_d[47]),_r(_d[48]),_r(_d[49]),_r(_d[50]),_r(_d[51]),_r(_d[52]),_r(_d[53]);const y=({style:e})=>(0,t.jsx)(i.default,{style:{color:"var(--privy-color-error)",...e}});let f={google:{name:"Google",component:a.G},discord:{name:"Discord",component:a.D},github:{name:"Github",component:a.b},linkedin:{name:"LinkedIn",component:a.L},twitter:{name:"Twitter",component:a.a},spotify:{name:"Spotify",component:a.S},instagram:{name:"Instagram",component:a.I},tiktok:{name:"Tiktok",component:a.T},line:{name:"LINE",component:c.L},twitch:{name:"Twitch",component:c.T},apple:{name:"Apple",component:a.A}},h=({iconUrl:e,...t})=>o.default.createElement("svg",{width:"33",height:"32",viewBox:"0 0 33 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},o.default.createElement("foreignObject",{x:"2",y:"2",width:"29",height:"28"},o.default.createElement("img",{src:e,width:"29",height:"28",style:{display:"block",objectFit:"contain",borderRadius:"4px"},alt:"Provider icon"})));const v=(e,t)=>{if(e in f)return f[e];if((0,n.i)(e)&&t){let r=t.find(t=>t.provider===e);if(r)return{name:r.provider_display_name,component:e=>o.default.createElement(h,{...e,iconUrl:r.provider_icon_url})}}return{name:"Unknown",component:y}};function E(e,t,r){let o={detail:"",retryable:!1},n=(0,m.e)(t);if(e?.privyErrorCode===l.b.LINKED_TO_ANOTHER_USER&&(o.detail="This account has already been linked to another user."),e?.privyErrorCode===l.b.INVALID_CREDENTIALS&&(o.retryable=!0,o.detail="Something went wrong. Try again."),e.privyErrorCode===l.b.OAUTH_USER_DENIED&&(o.detail=`Retry and check ${n} to finish connecting your account.`,o.retryable=!0),e?.privyErrorCode===l.b.TOO_MANY_REQUESTS&&(o.detail="Too many requests. Please wait before trying again."),e?.privyErrorCode===l.b.TOO_MANY_REQUESTS&&e.message.includes("provider rate limit")){let e=v(t,r).name;o.detail=`Request limit reached for ${e}. Please wait a moment and try again.`}if(e?.privyErrorCode===l.b.OAUTH_ACCOUNT_SUSPENDED){let e=v(t,r).name;o.detail=`Your ${e} account is suspended. Please try another login method.`}return e?.privyErrorCode===l.b.CANNOT_LINK_MORE_OF_TYPE&&(o.detail="You cannot authorize more than one account for this user."),e?.privyErrorCode===l.b.OAUTH_UNEXPECTED&&t.startsWith("privy:")&&(o.detail="Something went wrong. Please try again."),o}const g=({providerName:e,ProviderLogo:r,success:o,errorMessage:n,onRetry:a})=>{let i=o?`Successfully connected with ${e}`:n?n.message:`Verifying connection to ${e}`;return(0,t.jsx)(u.S,{title:i,subtitle:o?"You're good to go!":n?n.detail:"Just a few moments more",icon:r,iconVariant:"loading",iconLoadingStatus:{success:o,fail:!!n},secondaryCta:n?.retryable&&a?{label:"Retry",onClick:a}:void 0,watermark:!0})},b={component:()=>{let{authenticated:e,logout:o,ready:a,user:i}=(0,n.u)(),{setModalData:c,navigate:u,resetNavigation:m}=(0,n.a)(),y=(0,d.u)(),{getAuthMeta:f,initLoginWithOAuth:h,loginWithOAuth:b,updateWallets:S,setReadyToTrue:T,closePrivyModal:_,createAnalyticsEvent:A}=(0,l.u)(),[O,C]=(0,r.useState)(!1),[w,R]=(0,r.useState)(void 0),N=f()?.provider||"google",{name:U,component:L}=v(N,y.customOAuthProviders);return(0,r.useEffect)(()=>{b(N).then(()=>{C(!0),T(!0)}).catch(e=>{if(T(!1),e?.privyErrorCode===l.b.ALLOWLIST_REJECTED)return R(void 0),m(),void u("AllowlistRejectionScreen");if(e?.privyErrorCode===l.b.USER_LIMIT_REACHED)return console.error(new l.k(e).toString()),R(void 0),m(),void u("UserLimitReachedScreen");if(e?.privyErrorCode===l.b.USER_DOES_NOT_EXIST)return R(void 0),m(),void u("AccountNotFoundScreen");if(e?.privyErrorCode===l.b.ACCOUNT_TRANSFER_REQUIRED&&e.data?.data?.nonce)return R(void 0),m(),c({accountTransfer:{nonce:e.data?.data?.nonce,account:e.data?.data?.subject,displayName:e.data?.data?.account?.displayName,linkMethod:f()?.provider,embeddedWalletAddress:e.data?.data?.otherUser?.embeddedWalletAddress,oAuthUserInfo:e.data?.data?.otherUser?.oAuthUserInfo}}),void u("LinkConflictScreen");let{retryable:t,detail:r}=E(e,N,y.customOAuthProviders);R({retryable:t,detail:r,message:"Authentication failed"})}).finally(()=>{(0,p.o)()})},[U,N]),(0,r.useEffect)(()=>{if(a&&e&&O&&i){if(y?.legal.requireUsersAcceptTerms&&!i.hasAcceptedTerms){let e=setTimeout(()=>{u("AffirmativeConsentScreen")},d.q);return()=>clearTimeout(e)}if((0,s.s)(i,y.embeddedWallets)){let e=setTimeout(()=>{c({createWallet:{onSuccess:()=>{},onFailure:e=>{console.error(e),A({eventName:"embedded_wallet_creation_failure_logout",payload:{error:e,provider:N,screen:"OAuthStatusScreen"}}),o()},callAuthOnSuccessOnClose:!0}}),u("EmbeddedWalletOnAccountCreateScreen")},d.q);return()=>clearTimeout(e)}{let e=setTimeout(()=>_({shouldCallAuthOnSuccess:!0,isSuccess:!0}),d.q);return S(),()=>clearTimeout(e)}}},[a,e,O,i]),(0,t.jsx)(g,{providerName:U,ProviderLogo:L,success:O,errorMessage:w,onRetry:w?.retryable?()=>{(0,p.o)(),h(N),R(void 0)}:void 0})},isShownBeforeReady:!0}},5790,[5,3,2508,5700,5668,5701,2509,2511,5253,5243,5762,2128,792,2129,2510,6275,5244,6277,2523,2524,2537,2539,2293,2540,1019,2621,2622,5245,5246,5247,5248,5249,5250,5251,2310,2164,2623,2295,2683,2686,2689,2690,2691,2692,2900,4618,2341,4620,2132,4621,2326,7827,4873,4874]);