__d(function(_g,_r,_i,_a,_m,_e,_d){"use strict";const e=["types","primaryType"];Object.defineProperty(_e,'__esModule',{value:!0}),Object.defineProperty(_e,"SignRequestScreen",{enumerable:!0,get:function(){return j}}),Object.defineProperty(_e,"SignRequestView",{enumerable:!0,get:function(){return E}}),Object.defineProperty(_e,"default",{enumerable:!0,get:function(){return j}});var t,n=_r(_d[0]),i=(t=n)&&t.__esModule?t:{default:t},s=_r(_d[1]),r=_r(_d[2]),o=_r(_d[3]),a=_r(_d[4]),l=_r(_d[5]),c=_r(_d[6]),d=_r(_d[7]),u=_r(_d[8]),g=_r(_d[9]),p=_r(_d[10]),y=_r(_d[11]),m=_r(_d[12]),h=_r(_d[13]),x=_r(_d[14]),f=_r(_d[15]);_r(_d[16]),_r(_d[17]),_r(_d[18]),_r(_d[19]),_r(_d[20]),_r(_d[21]),_r(_d[22]),_r(_d[23]),_r(_d[24]),_r(_d[25]),_r(_d[26]),_r(_d[27]),_r(_d[28]),_r(_d[29]),_r(_d[30]),_r(_d[31]),_r(_d[32]),_r(_d[33]),_r(_d[34]);const C=l.styled.img.withConfig({displayName:"StyledLogo",componentId:"sc-68c1b1ea-0"})(["&&{height:",";width:",";border-radius:16px;margin-bottom:12px;}"],e=>"sm"===e.size?"65px":"140px",e=>"sm"===e.size?"65px":"140px");let S=e=>{if(!(0,c.isHex)(e))return e;try{let t=(0,c.hexToString)(e);return t.includes("\ufffd")?e:t}catch{return e}},b=e=>{try{let t=r.base64.decode(e),n=(new TextDecoder).decode(t);return n.includes("\ufffd")?e:n}catch{return e}},w=t=>{let n=t.typedData,r=(0,i.default)(n,e);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(v,{data:r}),(0,s.jsx)(u.C,{text:(o=t.typedData,JSON.stringify(o,null,2)),itemName:"full payload to clipboard"})," "]});var o};const E=({method:e,messageData:t,copy:n,iconUrl:i,isLoading:r,success:a,walletProxyIsLoading:l,errorMessage:c,isCancellable:d,onSign:u,onCancel:p,onClose:y})=>(0,s.jsx)(f.S,{title:n.title,subtitle:n.description,showClose:!0,onClose:y,icon:o.Edit,iconVariant:"subtle",helpText:c?(0,s.jsx)(_,{children:c}):void 0,primaryCta:{label:n.buttonText,onClick:u,disabled:r||a||l,loading:r},secondaryCta:d?{label:"Not now",onClick:p,disabled:r||a||l}:void 0,watermark:!0,children:(0,s.jsxs)(g.a,{children:[i?(0,s.jsx)(C,{style:{alignSelf:"center"},size:"sm",src:i,alt:"app image"}):null,(0,s.jsxs)(T,{children:["personal_sign"===e&&(0,s.jsx)(P,{children:S(t)}),"eth_signTypedData_v4"===e&&(0,s.jsx)(w,{typedData:t}),"solana_signMessage"===e&&(0,s.jsx)(P,{children:b(t)})]})]})}),j={component:()=>{let{authenticated:e}=(0,x.u)(),{initializeWalletProxy:t,closePrivyModal:n}=(0,h.u)(),{navigate:i,data:r,onUserCloseViaDialogOrKeybindRef:o}=(0,x.a)(),[l,c]=(0,a.useState)(!0),[u,g]=(0,a.useState)(""),[p,f]=(0,a.useState)(),[C,S]=(0,a.useState)(null),[b,w]=(0,a.useState)(!1);(0,a.useEffect)(()=>{e||i("LandingScreen")},[e]),(0,a.useEffect)(()=>{t(m.W).then(e=>{c(!1),e||(g("An error has occurred, please try again."),f(new y.P(new y.j(u,d.ProviderErrors.E32603_DEFAULT_INTERNAL_ERROR.eipCode))))})},[]);let{method:j,data:T,confirmAndSign:_,onSuccess:v,onFailure:P,uiOptions:R}=r.signMessage,D={title:R?.title||"Sign message",description:R?.description||"Signing this message will not cost you any fees.",buttonText:R?.buttonText||"Sign and continue"},N=e=>{e?v(e):P(p||new y.P(new y.j("The user rejected the request.",d.ProviderErrors.E4001_USER_REJECTED_REQUEST.eipCode))),n({shouldCallAuthOnSuccess:!1}),setTimeout(()=>{S(null),g(""),f(void 0)},200)};return o.current=()=>{N(C)},(0,s.jsx)(E,{method:j,messageData:T,copy:D,iconUrl:R?.iconUrl&&"string"==typeof R.iconUrl?R.iconUrl:void 0,isLoading:b,success:null!==C,walletProxyIsLoading:l,errorMessage:u,isCancellable:R?.isCancellable,onSign:async()=>{w(!0),g("");try{let e=await _();S(e),w(!1),setTimeout(()=>{N(e)},m.q)}catch(e){console.error(e),g("An error has occurred, please try again."),f(new y.P(new y.j(u,d.ProviderErrors.E32603_DEFAULT_INTERNAL_ERROR.eipCode))),w(!1)}},onCancel:()=>N(null),onClose:()=>N(C)})}};let T=l.styled.div.withConfig({displayName:"MessageContainer",componentId:"sc-124260c0-0"})(["flex:1;display:flex;flex-direction:column;gap:16px;"]),_=l.styled.p.withConfig({displayName:"ErrorText",componentId:"sc-124260c0-1"})(["&&{margin:0;width:100%;text-align:center;color:var(--privy-color-error-dark);font-size:14px;line-height:22px;}"]),v=(0,l.styled)(p.D).withConfig({displayName:"StyledDisplayJsonTree",componentId:"sc-124260c0-2"})(["margin-top:0;"]),P=(0,l.styled)(p.M).withConfig({displayName:"StyledMessage",componentId:"sc-124260c0-3"})(["margin-top:0;"])},4255,[289,16,1662,4571,14,1568,943,784,4659,4593,4696,1591,1557,1559,1556,4572,4585,1341,1558,1560,4573,1564,1565,1589,1592,1160,1593,1594,4574,4575,4576,4577,4578,4579,4580]);