__d(function(_g,_r,_i,_a,_m,_e,_d){"use strict";Object.defineProperty(_e,'__esModule',{value:!0}),Object.defineProperty(_e,"FarcasterConnectStatusScreen",{enumerable:!0,get:function(){return E}}),Object.defineProperty(_e,"FarcasterConnectStatusView",{enumerable:!0,get:function(){return T}}),Object.defineProperty(_e,"default",{enumerable:!0,get:function(){return E}});var e=_r(_d[0]),t=_r(_d[1]),r=_r(_d[2]),a=_r(_d[3]),i=_r(_d[4]),n=_r(_d[5]),o=_r(_d[6]),s=_r(_d[7]),l=_r(_d[8]),d=_r(_d[9]),c=_r(_d[10]),u=_r(_d[11]),p=_r(_d[12]),m=_r(_d[13]),h=_r(_d[14]),g=_r(_d[15]);_r(_d[16]),_r(_d[17]),_r(_d[18]),_r(_d[19]),_r(_d[20]),_r(_d[21]),_r(_d[22]),_r(_d[23]),_r(_d[24]),_r(_d[25]),_r(_d[26]),_r(_d[27]),_r(_d[28]),_r(_d[29]),_r(_d[30]),_r(_d[31]),_r(_d[32]),_r(_d[33]),_r(_d[34]),_r(_d[35]),_r(_d[36]),_r(_d[37]),_r(_d[38]),_r(_d[39]),_r(_d[40]),_r(_d[41]),_r(_d[42]),_r(_d[43]),_r(_d[44]),_r(_d[45]),_r(_d[46]),_r(_d[47]),_r(_d[48]),_r(_d[49]),_r(_d[50]),_r(_d[51]),_r(_d[52]),_r(_d[53]),_r(_d[54]),_r(_d[55]);let y=a.styled.div.withConfig({displayName:"Container",componentId:"sc-913deead-0"})(["width:100%;"]),f=a.styled.div.withConfig({displayName:"InputContainer",componentId:"sc-913deead-1"})(["display:flex;align-items:center;justify-content:space-between;gap:0.75rem;padding:0.75rem;height:56px;background:",";border:1px solid var(--privy-color-foreground-4);border-radius:var(--privy-border-radius-md);&:hover{border-color:",";}"],e=>e.$disabled?"var(--privy-color-background-2)":"var(--privy-color-background)",e=>e.$disabled?"var(--privy-color-foreground-4)":"var(--privy-color-foreground-3)"),v=a.styled.div.withConfig({displayName:"TextContainer",componentId:"sc-913deead-2"})(["flex:1;min-width:0;display:flex;align-items:center;"]),b=a.styled.span.withConfig({displayName:"Text",componentId:"sc-913deead-3"})(["display:block;font-size:16px;line-height:24px;color:",";overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:1;-webkit-box-orient:vertical;word-break:break-all;@media (min-width:441px){font-size:14px;line-height:20px;}"],e=>e.$disabled?"var(--privy-color-foreground-2)":"var(--privy-color-foreground)"),x=(0,a.styled)(b).withConfig({displayName:"PlaceholderText",componentId:"sc-913deead-4"})(["color:var(--privy-color-foreground-3);font-style:italic;"]),C=(0,a.styled)(d.L).withConfig({displayName:"TitleLabel",componentId:"sc-913deead-5"})(["margin-bottom:0.5rem;"]),w=(0,a.styled)(l.S).withConfig({displayName:"CopyButton",componentId:"sc-913deead-6"})(["&&{gap:0.375rem;font-size:14px;flex-shrink:0;}"]);const S=({value:r,title:a,placeholder:i,className:n,showCopyButton:o=!0,truncate:l,maxLength:d=40,disabled:c=!1})=>{let[u,p]=(0,t.useState)(!1),m=l&&r?((e,t,r)=>{if((e=e.startsWith("https://")?e.slice(8):e).length<=r)return e;if("middle"===t){let t=Math.ceil(r/2)-2,a=Math.floor(r/2)-1;return`${e.slice(0,t)}...${e.slice(-a)}`}return`${e.slice(0,r-3)}...`})(r,l,d):r;return(0,t.useEffect)(()=>{if(u){let e=setTimeout(()=>p(!1),3e3);return()=>clearTimeout(e)}},[u]),(0,e.jsxs)(y,{className:n,children:[a&&(0,e.jsx)(C,{children:a}),(0,e.jsxs)(f,{$disabled:c,children:[(0,e.jsx)(v,{children:r?(0,e.jsx)(b,{$disabled:c,title:r,children:m}):(0,e.jsx)(x,{$disabled:c,children:i||"No value"})}),o&&r&&(0,e.jsx)(w,{onClick:function(e){e.stopPropagation(),navigator.clipboard.writeText(r).then(()=>p(!0)).catch(console.error)},size:"sm",children:(0,e.jsxs)(e.Fragment,u?{children:["Copied",(0,e.jsx)(s.Check,{size:14})]}:{children:["Copy",(0,e.jsx)(s.Copy,{size:14})]})})]})]})},T=({connectUri:t,loading:a,success:s,errorMessage:l,onBack:d,onClose:c,onOpenFarcaster:u})=>(0,e.jsx)(h.S,r.isMobile||a?r.isIOS?{title:l?l.message:"Sign in with Farcaster",subtitle:l?l.detail:"To sign in with Farcaster, please open the Farcaster app.",icon:g.F,iconVariant:"loading",iconLoadingStatus:{success:s,fail:!!l},primaryCta:t&&u?{label:"Open Farcaster app",onClick:u}:void 0,onBack:d,onClose:c,watermark:!0}:{title:l?l.message:"Signing in with Farcaster",subtitle:l?l.detail:"This should only take a moment",icon:g.F,iconVariant:"loading",iconLoadingStatus:{success:s,fail:!!l},onBack:d,onClose:c,watermark:!0,children:t&&r.isMobile&&(0,e.jsx)(j,{children:(0,e.jsx)(n.O,{text:"Take me to Farcaster",url:t,color:"#8a63d2"})})}:{title:"Sign in with Farcaster",subtitle:"Scan with your phone's camera to continue.",onBack:d,onClose:c,watermark:!0,children:(0,e.jsxs)(k,{children:[(0,e.jsx)(I,{children:t?(0,e.jsx)(o.Q,{url:t,size:275,squareLogoElement:g.F}):(0,e.jsx)(F,{children:(0,e.jsx)(i.L,{})})}),(0,e.jsxs)(N,{children:[(0,e.jsx)(A,{children:"Or copy this link and paste it into a phone browser to open the Farcaster app."}),t&&(0,e.jsx)(S,{value:t,truncate:"end",maxLength:30,showCopyButton:!0,disabled:!0})]})]})}),E={component:()=>{let{authenticated:r,logout:a,ready:i,user:n}=(0,p.u)(),{lastScreen:o,navigate:s,navigateBack:l,setModalData:d}=(0,p.a)(),h=(0,c.u)(),{getAuthFlow:g,loginWithFarcaster:y,closePrivyModal:f,createAnalyticsEvent:v}=(0,u.u)(),[b,x]=(0,t.useState)(void 0),[C,w]=(0,t.useState)(!1),[S,E]=(0,t.useState)(!1),j=(0,t.useRef)([]),k=g(),I=k?.meta.connectUri;return(0,t.useEffect)(()=>{let e=Date.now(),t=setInterval(async()=>{let r=await k.pollForReady.execute(),a=Date.now()-e;if(r){clearInterval(t),w(!0);try{await y(),E(!0)}catch(e){let t={retryable:!1,message:"Authentication failed"};if(e?.privyErrorCode===u.b.ALLOWLIST_REJECTED)return void s("AllowlistRejectionScreen");if(e?.privyErrorCode===u.b.USER_LIMIT_REACHED)return console.error(new u.k(e).toString()),void s("UserLimitReachedScreen");if(e?.privyErrorCode===u.b.USER_DOES_NOT_EXIST)return void s("AccountNotFoundScreen");if(e?.privyErrorCode===u.b.LINKED_TO_ANOTHER_USER)t.detail=e.message??"This account has already been linked to another user.";else{if(e?.privyErrorCode===u.b.ACCOUNT_TRANSFER_REQUIRED&&e.data?.data?.nonce)return d({accountTransfer:{nonce:e.data?.data?.nonce,account:e.data?.data?.subject,displayName:e.data?.data?.account?.displayName,linkMethod:"farcaster",embeddedWalletAddress:e.data?.data?.otherUser?.embeddedWalletAddress,farcasterEmbeddedAddress:e.data?.data?.otherUser?.farcasterEmbeddedAddress}}),void s("LinkConflictScreen");e?.privyErrorCode===u.b.INVALID_CREDENTIALS?(t.retryable=!0,t.detail="Something went wrong. Try again."):e?.privyErrorCode===u.b.TOO_MANY_REQUESTS&&(t.detail="Too many requests. Please wait before trying again.")}x(t)}}else a>12e4&&(clearInterval(t),x({retryable:!0,message:"Authentication failed",detail:"The request timed out. Try again."}))},2e3);return()=>{clearInterval(t),j.current.forEach(e=>clearTimeout(e))}},[]),(0,t.useEffect)(()=>{if(i&&r&&S&&n){if(h?.legal.requireUsersAcceptTerms&&!n.hasAcceptedTerms){let e=setTimeout(()=>{s("AffirmativeConsentScreen")},c.q);return()=>clearTimeout(e)}S&&((0,m.s)(n,h.embeddedWallets)?j.current.push(setTimeout(()=>{d({createWallet:{onSuccess:()=>{},onFailure:e=>{console.error(e),v({eventName:"embedded_wallet_creation_failure_logout",payload:{error:e,screen:"FarcasterConnectStatusScreen"}}),a()},callAuthOnSuccessOnClose:!0}}),s("EmbeddedWalletOnAccountCreateScreen")},c.q)):j.current.push(setTimeout(()=>f({shouldCallAuthOnSuccess:!0,isSuccess:!0}),c.q)))}},[S,i,r,n]),(0,e.jsx)(T,{connectUri:I,loading:C,success:S,errorMessage:b,onBack:o?l:void 0,onClose:f,onOpenFarcaster:()=>{I&&(window.location.href=I)}})}};let j=a.styled.div.withConfig({displayName:"MobileLinkContainer",componentId:"sc-914339e1-0"})(["margin-top:24px;"]),k=a.styled.div.withConfig({displayName:"ContentContainer",componentId:"sc-914339e1-1"})(["display:flex;flex-direction:column;align-items:center;gap:24px;"]),I=a.styled.div.withConfig({displayName:"QrContainer",componentId:"sc-914339e1-2"})(["display:flex;align-items:center;justify-content:center;min-height:275px;"]),N=a.styled.div.withConfig({displayName:"InstructionsContainer",componentId:"sc-914339e1-3"})(["display:flex;flex-direction:column;align-items:center;gap:16px;"]),A=a.styled.div.withConfig({displayName:"InstructionText",componentId:"sc-914339e1-4"})(["font-size:0.875rem;text-align:center;color:var(--privy-color-foreground-2);"]),F=a.styled.div.withConfig({displayName:"LoaderWrapper",componentId:"sc-914339e1-5"})(["position:relative;width:82px;height:82px;"])},5737,[5,3,2537,6277,2523,5738,5584,7957,5244,5707,2509,2511,2508,5253,5243,5697,2524,2539,2129,2293,2540,792,1019,2621,2622,5640,2510,6275,2128,2310,2164,2623,2295,2683,2686,2689,2690,2691,2692,2900,4618,2341,4620,2132,4621,2326,7827,4873,4874,5245,5246,5247,5248,5249,5250,5251]);