__d(function(g,_r,_i,a,m,_e,d){"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(_e,'__esModule',{value:!0}),Object.defineProperty(_e,"MfaAuthEnrollmentFlowScreen",{enumerable:!0,get:function(){return y}}),Object.defineProperty(_e,"default",{enumerable:!0,get:function(){return y}});var t=_r(d[0]),n=e(_r(d[1])),r=e(_r(d[2])),o=_r(d[3]),s=_r(d[4]),l=_r(d[5]),i=_r(d[6]),u=_r(d[7]),c=_r(d[8]),h=_r(d[9]),f=_r(d[10]);_r(d[11]),_r(d[12]),_r(d[13]),_r(d[14]),_r(d[15]),_r(d[16]),_r(d[17]),_r(d[18]),_r(d[19]),_r(d[20]),_r(d[21]),_r(d[22]),_r(d[23]),_r(d[24]),_r(d[25]),_r(d[26]),_r(d[27]),_r(d[28]),_r(d[29]),_r(d[30]),_r(d[31]),_r(d[32]),_r(d[33]),_r(d[34]),_r(d[35]),_r(d[36]),_r(d[37]),_r(d[38]),_r(d[39]),_r(d[40]),_r(d[41]),_r(d[42]),_r(d[43]),_r(d[44]),_r(d[45]),_r(d[46]),_r(d[47]),_r(d[48]),_r(d[49]),_r(d[50]),_r(d[51]),_r(d[52]),_r(d[53]),_r(d[54]),_r(d[55]),_r(d[56]),_r(d[57]),_r(d[58]),_r(d[59]),_r(d[60]),_r(d[61]),_r(d[62]),_r(d[63]),_r(d[64]),_r(d[65]),_r(d[66]),_r(d[67]),_r(d[68]),_r(d[69]),_r(d[70]),_r(d[71]),_r(d[72]),_r(d[73]),_r(d[74]),_r(d[75]),_r(d[76]);const y={component:()=>{let{user:e,ready:y}=(0,c.u)(),{data:j,onUserCloseViaDialogOrKeybindRef:x}=(0,c.a)(),p=(0,u.u)(),[v,M]=(0,o.useState)(null),[k,w]=(0,o.useState)(null),[b,S]=(0,o.useState)(null),[C,F]=(0,o.useState)(!1),[A,P]=(0,o.useState)(!1),[E,R]=(0,o.useState)(),T=async()=>{E?B(E):e?await I({user:e}):B(Error("Must be logged in to manage MFA")),setTimeout(()=>{M(null),w(null)},500)};if(x.current=T,!j?.mfaEnroll)throw Error("Missing modal data for MFA enrollment screen.");let{onFailure:B,onSuccess:I,onBack:O,mfaMethods:_,verify:U,generateTotpSecret:L,enrollTotp:W,unenrollTotp:$,enrollPasskey:D}=j.mfaEnroll,H=e?.mfaMethods.includes("sms"),K=e?.mfaMethods.includes("totp"),N=e?.mfaMethods.includes("passkey"),V=!!e?.phone,q=e?.linkedAccounts.filter(e=>"passkey"===e.type).map(e=>e.credentialId)??[];function z(){M(null),w(null),R(void 0)}async function G(e=q){try{R(void 0),P(!0);let t=await D(e);return await I({user:t})}catch(e){R(e)}finally{P(!1),F(!1)}}if(!y||!e||!p)return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.M,{onClose:T,backFn:O},"header"),(0,t.jsx)(f.A,{children:(0,t.jsx)(h.M,{})}),(0,t.jsx)(f.C,{children:(0,t.jsx)(l.L,{})}),(0,t.jsx)(i.a,{})]});if("sms"===v)return null;if("totp"===v)return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.M,{backFn:z,onClose:T},"header"),(0,t.jsx)(f.I,{style:{marginBottom:"1.5rem"},children:(0,t.jsx)(n.default,{})}),(0,t.jsx)(f.T,{children:"Remove authenticator app verification?"}),(0,t.jsxs)(f.S,{children:["MFA adds an extra layer of security to your ",p?.name," account. Make sure you have other methods to secure your account."]}),(0,t.jsx)(f.B,{children:(0,t.jsx)(s.P,{$warn:!0,onClick:async function(){try{R(void 0),P(!0);let e=await $();return await I({user:e})}catch(e){R(e)}finally{P(!1),M(null)}},loading:A,children:"Remove"})}),(0,t.jsx)(i.a,{})]});if("passkey"===v){let e=j.mfaEnroll.shouldUnlinkOnUnenrollMfa??!0;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.M,{backFn:z,onClose:T},"header"),(0,t.jsx)(f.I,{style:{marginBottom:"1.5rem"},children:(0,t.jsx)(n.default,{})}),(0,t.jsx)(f.T,{children:"Are you sure you want to remove this passkey?"}),(0,t.jsx)(f.S,{children:e?"Removing your passkey will remove as both a verification method and a login method.":"Removing your passkey will remove as a verification method."}),(0,t.jsx)(f.B,{children:(0,t.jsx)(s.P,{$warn:!0,onClick:async function(){try{R(void 0),P(!0);let e=await D([]);return await I({user:e})}catch(e){R(e)}finally{P(!1),M(null)}},loading:A,children:"Remove"})}),(0,t.jsx)(i.a,{})]})}return 0!==_.length||H||K||N?"sms"===k?null:"totp"===k&&b?(0,t.jsx)(h.E,{onClose:T,onReset:z,submitEnrollmentWithTotp:e=>(async function(e){try{R(void 0),P(!0);let t=await W(e);return await I({user:t})}catch(e){R(e)}finally{P(!1),M(null)}})(e.mfaCode),error:E,totpInfo:Object.assign({},b,{appName:p?.name||"Privy"})}):"passkey"===k?(0,t.jsx)(h.a,{onReset:z,onClose:T,submitEnrollmentWithPasskey:G}):(0,t.jsx)(h.b,{showIntro:!0,userMfaMethods:e.mfaMethods,appMfaMethods:p.mfa.methods,userHasAuthSms:V,backFn:O,handleSelectMethod:async function(e){R(void 0);try{await U()}catch(e){return void R(e)}return"totp"===e?(w(e),S(null),void L().then(({totpSecret:e,totpAuthUrl:t})=>{S({authUrl:t,secret:e})}).catch(()=>{S(null),z()})):"passkey"===e&&1===q.length?await G():void w(e)},isTotpLoading:"totp"===k&&!b,isPasskeyLoading:C,error:E,onClose:T,setRemovingMfaMethod:async function(e){R(void 0);try{await U()}catch(e){return void R(e)}M(e)}}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.M,{onClose:T,backFn:O},"header"),(0,t.jsx)(f.I,{style:{marginBottom:"1.5rem"},children:(0,t.jsx)(r.default,{})}),(0,t.jsx)(f.T,{children:"Add more security"}),(0,t.jsxs)(f.S,{children:[p?.name," does not have any verification methods enabled."]}),(0,t.jsx)(f.B,{children:(0,t.jsx)(s.P,{onClick:T,children:"Close"})}),(0,t.jsx)(i.a,{})]})}}},4243,[16,4578,4677,14,4573,1564,4575,1557,1556,4678,4679,1568,1565,1589,1591,784,1559,1560,1341,1592,943,1160,1593,1594,4576,4577,4579,1558,4680,4681,4633,4682,4625,4612,4608,4683,4684,4228,4571,783,1358,819,1595,1343,1654,1657,1660,1661,1662,1663,1871,3739,1389,3741,787,3742,1374,3748,3894,3895,4598,4572,4574,4580,4239,4672,4659,4585,4593,4685,4640,4609,4610,4615,4686,4586,4587]);